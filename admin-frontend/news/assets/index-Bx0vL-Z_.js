import{r as e,j as s,V as a,R as t,A as r,C as i,X as n,T as l,D as o,P as d,o as c,v as m,a as u,b as h,c as x,d as p,S as g,e as f,O as v,f as j,g as b,h as y,i as N,k as w,l as C,m as k,u as S,H as E,F as _,n as A,p as z,U as R,q as I,s as F,N as T,t as $,w as M,x as P,y as B,z as D,I as L,B as U,E as O,G as V,J as G,K as Y,L as q,M as H,Q as K,W,Y as J,Z as Q,_ as X,$ as Z,a0 as ee,a1 as se,a2 as ae,a3 as te,a4 as re,a5 as ie,a6 as ne,a7 as le,a8 as oe,a9 as de,aa as ce,ab as me,ac as ue,ad as he,ae as xe,af as pe,ag as ge,ah as fe,ai as ve,aj as je,ak as be,al as ye,am as Ne,an as we,ao as Ce,ap as ke,aq as Se,ar as Ee,as as _e,at as Ae,au as ze,av as Re,aw as Ie,ax as Fe,ay as Te,az as $e,aA as Me,aB as Pe,aC as Be,aD as De,aE as Le,aF as Ue,aG as Oe,aH as Ve,aI as Ge,aJ as Ye,aK as qe,aL as He,aM as Ke,aN as We,aO as Je,aP as Qe,aQ as Xe,aR as Ze,aS as es,aT as ss,aU as as,aV as ts,aW as rs,aX as is,aY as ns,aZ as ls,a_ as os,a$ as ds,b0 as cs,b1 as ms}from"./vendor-ZyVllgs4.js";import{c as us,t as hs}from"./utils-BpqZfnrR.js";import{a as xs,g as ps}from"./admin-DuvMtuGC.js";import{u as gs,d as fs}from"./firebase-BDVO_Iko.js";import"./ui-CttiZxwU.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();let vs=0;const js=new Map,bs=e=>{if(js.has(e))return;const s=setTimeout(()=>{js.delete(e),Cs({type:"REMOVE_TOAST",toastId:e})},1e6);js.set(e,s)},ys=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{const{toastId:a}=s;return a?bs(a):e.toasts.forEach(e=>{bs(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===s.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},Ns=[];let ws={toasts:[]};function Cs(e){ws=ys(ws,e),Ns.forEach(e=>{e(ws)})}function ks({...e}){const s=(vs=(vs+1)%Number.MAX_SAFE_INTEGER,vs.toString()),a=()=>Cs({type:"DISMISS_TOAST",toastId:s});return Cs({type:"ADD_TOAST",toast:{...e,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>Cs({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function Ss(){const[s,a]=e.useState(ws);return e.useEffect(()=>(Ns.push(a),()=>{const e=Ns.indexOf(a);e>-1&&Ns.splice(e,1)}),[s]),{...s,toast:ks,dismiss:e=>Cs({type:"DISMISS_TOAST",toastId:e})}}const Es=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,_s=us,As=(e,s)=>a=>{var t;if(null==(null==s?void 0:s.variants))return _s(e,null==a?void 0:a.class,null==a?void 0:a.className);const{variants:r,defaultVariants:i}=s,n=Object.keys(r).map(e=>{const s=null==a?void 0:a[e],t=null==i?void 0:i[e];if(null===s)return null;const n=Es(s)||Es(t);return r[e][n]}),l=a&&Object.entries(a).reduce((e,s)=>{let[a,t]=s;return void 0===t||(e[a]=t),e},{}),o=null==s||null===(t=s.compoundVariants)||void 0===t?void 0:t.reduce((e,s)=>{let{class:a,className:t,...r}=s;return Object.entries(r).every(e=>{let[s,a]=e;return Array.isArray(a)?a.includes({...i,...l}[s]):{...i,...l}[s]===a})?[...e,a,t]:e},[]);return _s(e,n,o,null==a?void 0:a.class,null==a?void 0:a.className)};function zs(...e){return hs(us(e))}const Rs=d,Is=e.forwardRef(({className:e,...t},r)=>s.jsx(a,{ref:r,className:zs("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Is.displayName=a.displayName;const Fs=As("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ts=e.forwardRef(({className:e,variant:a,...r},i)=>s.jsx(t,{ref:i,className:zs(Fs({variant:a}),e),...r}));Ts.displayName=t.displayName;e.forwardRef(({className:e,...a},t)=>s.jsx(r,{ref:t,className:zs("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...a})).displayName=r.displayName;const $s=e.forwardRef(({className:e,...a},t)=>s.jsx(i,{ref:t,className:zs("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...a,children:s.jsx(n,{className:"h-4 w-4"})}));$s.displayName=i.displayName;const Ms=e.forwardRef(({className:e,...a},t)=>s.jsx(l,{ref:t,className:zs("text-sm font-semibold",e),...a}));Ms.displayName=l.displayName;const Ps=e.forwardRef(({className:e,...a},t)=>s.jsx(o,{ref:t,className:zs("text-sm opacity-90",e),...a}));function Bs(){const{toasts:e}=Ss();return s.jsxs(Rs,{children:[e.map(function({id:e,title:a,description:t,action:r,...i}){return s.jsxs(Ts,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[a&&s.jsx(Ms,{children:a}),t&&s.jsx(Ps,{children:t})]}),r,s.jsx($s,{})]},e)}),s.jsx(Is,{})]})}Ps.displayName=o.displayName;var Ds=["light","dark"],Ls=e.createContext(void 0),Us={setTheme:e=>{},themes:[]};e.memo(({forcedTheme:s,storageKey:a,attribute:t,enableSystem:r,enableColorScheme:i,defaultTheme:n,value:l,attrs:o,nonce:d})=>{let c="system"===n,m="class"===t?`var d=document.documentElement,c=d.classList;c.remove(${o.map(e=>`'${e}'`).join(",")});`:`var d=document.documentElement,n='${t}',s='setAttribute';`,u=i?Ds.includes(n)&&n?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${n}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(e,s=!1,a=!0)=>{let r=l?l[e]:e,n=s?e+"|| ''":`'${r}'`,o="";return i&&a&&!s&&Ds.includes(e)&&(o+=`d.style.colorScheme = '${e}';`),"class"===t?o+=s||r?`c.add(${n})`:"null":r&&(o+=`d[s](n,${n})`),o},x=s?`!function(){${m}${h(s)}}()`:r?`!function(){try{${m}var e=localStorage.getItem('${a}');if('system'===e||(!e&&${c})){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${l?`var x=${JSON.stringify(l)};`:""}${h(l?"x[e]":"e",!0)}}${c?"":"else{"+h(n,!1,!1)+"}"}${u}}catch(e){}}()`:`!function(){try{${m}var e=localStorage.getItem('${a}');if(e){${l?`var x=${JSON.stringify(l)};`:""}${h(l?"x[e]":"e",!0)}}else{${h(n,!1,!1)};}${u}}catch(t){}}();`;return e.createElement("script",{nonce:d,dangerouslySetInnerHTML:{__html:x}})});var Os=Array(12).fill(0),Vs=({visible:e,className:s})=>c.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":e},c.createElement("div",{className:"sonner-spinner"},Os.map((e,s)=>c.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),Gs=c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},c.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Ys=c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},c.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),qs=c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},c.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Hs=c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},c.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Ks=c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},c.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Ws=1,Js=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let s=this.subscribers.indexOf(e);this.subscribers.splice(s,1)}),this.publish=e=>{this.subscribers.forEach(s=>s(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var s;let{message:a,...t}=e,r="number"==typeof(null==e?void 0:e.id)||(null==(s=e.id)?void 0:s.length)>0?e.id:Ws++,i=this.toasts.find(e=>e.id===r),n=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(r)&&this.dismissedToasts.delete(r),i?this.toasts=this.toasts.map(s=>s.id===r?(this.publish({...s,...e,id:r,title:a}),{...s,...e,id:r,dismissible:n,title:a}):s):this.addToast({title:a,...t,dismissible:n,id:r}),r},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(e=>{this.subscribers.forEach(s=>s({id:e.id,dismiss:!0}))}),this.subscribers.forEach(s=>s({id:e,dismiss:!0})),e),this.message=(e,s)=>this.create({...s,message:e}),this.error=(e,s)=>this.create({...s,message:e,type:"error"}),this.success=(e,s)=>this.create({...s,type:"success",message:e}),this.info=(e,s)=>this.create({...s,type:"info",message:e}),this.warning=(e,s)=>this.create({...s,type:"warning",message:e}),this.loading=(e,s)=>this.create({...s,type:"loading",message:e}),this.promise=(e,s)=>{if(!s)return;let a;void 0!==s.loading&&(a=this.create({...s,promise:e,type:"loading",message:s.loading,description:"function"!=typeof s.description?s.description:void 0}));let t,r=e instanceof Promise?e:e(),i=void 0!==a,n=r.then(async e=>{if(t=["resolve",e],c.isValidElement(e))i=!1,this.create({id:a,type:"default",message:e});else if(Qs(e)&&!e.ok){i=!1;let t="function"==typeof s.error?await s.error(`HTTP error! status: ${e.status}`):s.error,r="function"==typeof s.description?await s.description(`HTTP error! status: ${e.status}`):s.description;this.create({id:a,type:"error",message:t,description:r})}else if(void 0!==s.success){i=!1;let t="function"==typeof s.success?await s.success(e):s.success,r="function"==typeof s.description?await s.description(e):s.description;this.create({id:a,type:"success",message:t,description:r})}}).catch(async e=>{if(t=["reject",e],void 0!==s.error){i=!1;let t="function"==typeof s.error?await s.error(e):s.error,r="function"==typeof s.description?await s.description(e):s.description;this.create({id:a,type:"error",message:t,description:r})}}).finally(()=>{var e;i&&(this.dismiss(a),a=void 0),null==(e=s.finally)||e.call(s)}),l=()=>new Promise((e,s)=>n.then(()=>"reject"===t[0]?s(t[1]):e(t[1])).catch(s));return"string"!=typeof a&&"number"!=typeof a?{unwrap:l}:Object.assign(a,{unwrap:l})},this.custom=(e,s)=>{let a=(null==s?void 0:s.id)||Ws++;return this.create({jsx:e(a),id:a,...s}),a},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Qs=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,Xs=(e,s)=>{let a=(null==s?void 0:s.id)||Ws++;return Js.addToast({title:e,...s,id:a}),a};function Zs(e){return void 0!==e.label}Object.assign(Xs,{success:Js.success,info:Js.info,warning:Js.warning,error:Js.error,custom:Js.custom,message:Js.message,promise:Js.promise,dismiss:Js.dismiss,loading:Js.loading},{getHistory:()=>Js.toasts,getToasts:()=>Js.getActiveToasts()}),function(e,{insertAt:s}={}){if("undefined"==typeof document)return;let a=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css","top"===s&&a.firstChild?a.insertBefore(t,a.firstChild):a.appendChild(t),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}(':where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}\n');var ea=3,sa=14;function aa(...e){return e.filter(Boolean).join(" ")}var ta=s=>{var a,t,r,i,n,l,o,d,m,u,h;let{invert:x,toast:p,unstyled:g,interacting:f,setHeights:v,visibleToasts:j,heights:b,index:y,toasts:N,expanded:w,removeToast:C,defaultRichColors:k,closeButton:S,style:E,cancelButtonStyle:_,actionButtonStyle:A,className:z="",descriptionClassName:R="",duration:I,position:F,gap:T,loadingIcon:$,expandByDefault:M,classNames:P,icons:B,closeButtonAriaLabel:D="Close toast",pauseWhenPageIsHidden:L}=s,[U,O]=c.useState(null),[V,G]=c.useState(null),[Y,q]=c.useState(!1),[H,K]=c.useState(!1),[W,J]=c.useState(!1),[Q,X]=c.useState(!1),[Z,ee]=c.useState(!1),[se,ae]=c.useState(0),[te,re]=c.useState(0),ie=c.useRef(p.duration||I||4e3),ne=c.useRef(null),le=c.useRef(null),oe=0===y,de=y+1<=j,ce=p.type,me=!1!==p.dismissible,ue=p.className||"",he=p.descriptionClassName||"",xe=c.useMemo(()=>b.findIndex(e=>e.toastId===p.id)||0,[b,p.id]),pe=c.useMemo(()=>{var e;return null!=(e=p.closeButton)?e:S},[p.closeButton,S]),ge=c.useMemo(()=>p.duration||I||4e3,[p.duration,I]),fe=c.useRef(0),ve=c.useRef(0),je=c.useRef(0),be=c.useRef(null),[ye,Ne]=F.split("-"),we=c.useMemo(()=>b.reduce((e,s,a)=>a>=xe?e:e+s.height,0),[b,xe]),Ce=(()=>{let[e,s]=c.useState(document.hidden);return c.useEffect(()=>{let e=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),ke=p.invert||x,Se="loading"===ce;ve.current=c.useMemo(()=>xe*T+we,[xe,we]),c.useEffect(()=>{ie.current=ge},[ge]),c.useEffect(()=>{q(!0)},[]),c.useEffect(()=>{let e=le.current;if(e){let s=e.getBoundingClientRect().height;return re(s),v(e=>[{toastId:p.id,height:s,position:p.position},...e]),()=>v(e=>e.filter(e=>e.toastId!==p.id))}},[v,p.id]),c.useLayoutEffect(()=>{if(!Y)return;let e=le.current,s=e.style.height;e.style.height="auto";let a=e.getBoundingClientRect().height;e.style.height=s,re(a),v(e=>e.find(e=>e.toastId===p.id)?e.map(e=>e.toastId===p.id?{...e,height:a}:e):[{toastId:p.id,height:a,position:p.position},...e])},[Y,p.title,p.description,v,p.id]);let Ee=c.useCallback(()=>{K(!0),ae(ve.current),v(e=>e.filter(e=>e.toastId!==p.id)),setTimeout(()=>{C(p)},200)},[p,C,v,ve]);return c.useEffect(()=>{if(p.promise&&"loading"===ce||p.duration===1/0||"loading"===p.type)return;let e;return w||f||L&&Ce?(()=>{if(je.current<fe.current){let e=(new Date).getTime()-fe.current;ie.current=ie.current-e}je.current=(new Date).getTime()})():ie.current!==1/0&&(fe.current=(new Date).getTime(),e=setTimeout(()=>{var e;null==(e=p.onAutoClose)||e.call(p,p),Ee()},ie.current)),()=>clearTimeout(e)},[w,f,p,ce,L,Ce,Ee]),c.useEffect(()=>{p.delete&&Ee()},[Ee,p.delete]),c.createElement("li",{tabIndex:0,ref:le,className:aa(z,ue,null==P?void 0:P.toast,null==(a=null==p?void 0:p.classNames)?void 0:a.toast,null==P?void 0:P.default,null==P?void 0:P[ce],null==(t=null==p?void 0:p.classNames)?void 0:t[ce]),"data-sonner-toast":"","data-rich-colors":null!=(r=p.richColors)?r:k,"data-styled":!(p.jsx||p.unstyled||g),"data-mounted":Y,"data-promise":!!p.promise,"data-swiped":Z,"data-removed":H,"data-visible":de,"data-y-position":ye,"data-x-position":Ne,"data-index":y,"data-front":oe,"data-swiping":W,"data-dismissible":me,"data-type":ce,"data-invert":ke,"data-swipe-out":Q,"data-swipe-direction":V,"data-expanded":!!(w||M&&Y),style:{"--index":y,"--toasts-before":y,"--z-index":N.length-y,"--offset":`${H?se:ve.current}px`,"--initial-height":M?"auto":`${te}px`,...E,...p.style},onDragEnd:()=>{J(!1),O(null),be.current=null},onPointerDown:e=>{Se||!me||(ne.current=new Date,ae(ve.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(J(!0),be.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,s,a,t;if(Q||!me)return;be.current=null;let r=Number((null==(e=le.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),i=Number((null==(s=le.current)?void 0:s.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),n=(new Date).getTime()-(null==(a=ne.current)?void 0:a.getTime()),l="x"===U?r:i,o=Math.abs(l)/n;if(Math.abs(l)>=20||o>.11)return ae(ve.current),null==(t=p.onDismiss)||t.call(p,p),G("x"===U?r>0?"right":"left":i>0?"down":"up"),Ee(),X(!0),void ee(!1);J(!1),O(null)},onPointerMove:e=>{var a,t,r,i;if(!be.current||!me||(null==(a=window.getSelection())?void 0:a.toString().length)>0)return;let n=e.clientY-be.current.y,l=e.clientX-be.current.x,o=null!=(t=s.swipeDirections)?t:function(e){let[s,a]=e.split("-"),t=[];return s&&t.push(s),a&&t.push(a),t}(F);!U&&(Math.abs(l)>1||Math.abs(n)>1)&&O(Math.abs(l)>Math.abs(n)?"x":"y");let d={x:0,y:0};"y"===U?(o.includes("top")||o.includes("bottom"))&&(o.includes("top")&&n<0||o.includes("bottom")&&n>0)&&(d.y=n):"x"===U&&(o.includes("left")||o.includes("right"))&&(o.includes("left")&&l<0||o.includes("right")&&l>0)&&(d.x=l),(Math.abs(d.x)>0||Math.abs(d.y)>0)&&ee(!0),null==(r=le.current)||r.style.setProperty("--swipe-amount-x",`${d.x}px`),null==(i=le.current)||i.style.setProperty("--swipe-amount-y",`${d.y}px`)}},pe&&!p.jsx?c.createElement("button",{"aria-label":D,"data-disabled":Se,"data-close-button":!0,onClick:Se||!me?()=>{}:()=>{var e;Ee(),null==(e=p.onDismiss)||e.call(p,p)},className:aa(null==P?void 0:P.closeButton,null==(i=null==p?void 0:p.classNames)?void 0:i.closeButton)},null!=(n=null==B?void 0:B.close)?n:Ks):null,p.jsx||e.isValidElement(p.title)?p.jsx?p.jsx:"function"==typeof p.title?p.title():p.title:c.createElement(c.Fragment,null,ce||p.icon||p.promise?c.createElement("div",{"data-icon":"",className:aa(null==P?void 0:P.icon,null==(l=null==p?void 0:p.classNames)?void 0:l.icon)},p.promise||"loading"===p.type&&!p.icon?p.icon||(null!=B&&B.loading?c.createElement("div",{className:aa(null==P?void 0:P.loader,null==(_e=null==p?void 0:p.classNames)?void 0:_e.loader,"sonner-loader"),"data-visible":"loading"===ce},B.loading):$?c.createElement("div",{className:aa(null==P?void 0:P.loader,null==(Ae=null==p?void 0:p.classNames)?void 0:Ae.loader,"sonner-loader"),"data-visible":"loading"===ce},$):c.createElement(Vs,{className:aa(null==P?void 0:P.loader,null==(ze=null==p?void 0:p.classNames)?void 0:ze.loader),visible:"loading"===ce})):null,"loading"!==p.type?p.icon||(null==B?void 0:B[ce])||(e=>{switch(e){case"success":return Gs;case"info":return qs;case"warning":return Ys;case"error":return Hs;default:return null}})(ce):null):null,c.createElement("div",{"data-content":"",className:aa(null==P?void 0:P.content,null==(o=null==p?void 0:p.classNames)?void 0:o.content)},c.createElement("div",{"data-title":"",className:aa(null==P?void 0:P.title,null==(d=null==p?void 0:p.classNames)?void 0:d.title)},"function"==typeof p.title?p.title():p.title),p.description?c.createElement("div",{"data-description":"",className:aa(R,he,null==P?void 0:P.description,null==(m=null==p?void 0:p.classNames)?void 0:m.description)},"function"==typeof p.description?p.description():p.description):null),e.isValidElement(p.cancel)?p.cancel:p.cancel&&Zs(p.cancel)?c.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||_,onClick:e=>{var s,a;Zs(p.cancel)&&me&&(null==(a=(s=p.cancel).onClick)||a.call(s,e),Ee())},className:aa(null==P?void 0:P.cancelButton,null==(u=null==p?void 0:p.classNames)?void 0:u.cancelButton)},p.cancel.label):null,e.isValidElement(p.action)?p.action:p.action&&Zs(p.action)?c.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||A,onClick:e=>{var s,a;Zs(p.action)&&(null==(a=(s=p.action).onClick)||a.call(s,e),!e.defaultPrevented&&Ee())},className:aa(null==P?void 0:P.actionButton,null==(h=null==p?void 0:p.classNames)?void 0:h.actionButton)},p.action.label):null));var _e,Ae,ze};function ra(){if("undefined"==typeof window||"undefined"==typeof document)return"ltr";let e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function ia(e,s){let a={};return[e,s].forEach((e,s)=>{let t=1===s,r=t?"--mobile-offset":"--offset",i=t?"16px":"32px";function n(e){["top","right","bottom","left"].forEach(s=>{a[`${r}-${s}`]="number"==typeof e?`${e}px`:e})}"number"==typeof e||"string"==typeof e?n(e):"object"==typeof e?["top","right","bottom","left"].forEach(s=>{void 0===e[s]?a[`${r}-${s}`]=i:a[`${r}-${s}`]="number"==typeof e[s]?`${e[s]}px`:e[s]}):n(i)}),a}var na=e.forwardRef(function(e,s){let{invert:a,position:t="bottom-right",hotkey:r=["altKey","KeyT"],expand:i,closeButton:n,className:l,offset:o,mobileOffset:d,theme:u="light",richColors:h,duration:x,style:p,visibleToasts:g=ea,toastOptions:f,dir:v=ra(),gap:j=sa,loadingIcon:b,icons:y,containerAriaLabel:N="Notifications",pauseWhenPageIsHidden:w}=e,[C,k]=c.useState([]),S=c.useMemo(()=>Array.from(new Set([t].concat(C.filter(e=>e.position).map(e=>e.position)))),[C,t]),[E,_]=c.useState([]),[A,z]=c.useState(!1),[R,I]=c.useState(!1),[F,T]=c.useState("system"!==u?u:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),$=c.useRef(null),M=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),P=c.useRef(null),B=c.useRef(!1),D=c.useCallback(e=>{k(s=>{var a;return null!=(a=s.find(s=>s.id===e.id))&&a.delete||Js.dismiss(e.id),s.filter(({id:s})=>s!==e.id)})},[]);return c.useEffect(()=>Js.subscribe(e=>{e.dismiss?k(s=>s.map(s=>s.id===e.id?{...s,delete:!0}:s)):setTimeout(()=>{m.flushSync(()=>{k(s=>{let a=s.findIndex(s=>s.id===e.id);return-1!==a?[...s.slice(0,a),{...s[a],...e},...s.slice(a+1)]:[e,...s]})})})}),[]),c.useEffect(()=>{if("system"!==u)return void T(u);if("system"===u&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?T("dark"):T("light")),"undefined"==typeof window)return;let e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",({matches:e})=>{T(e?"dark":"light")})}catch(s){e.addListener(({matches:e})=>{try{T(e?"dark":"light")}catch(s){}})}},[u]),c.useEffect(()=>{C.length<=1&&z(!1)},[C]),c.useEffect(()=>{let e=e=>{var s,a;r.every(s=>e[s]||e.code===s)&&(z(!0),null==(s=$.current)||s.focus()),"Escape"===e.code&&(document.activeElement===$.current||null!=(a=$.current)&&a.contains(document.activeElement))&&z(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r]),c.useEffect(()=>{if($.current)return()=>{P.current&&(P.current.focus({preventScroll:!0}),P.current=null,B.current=!1)}},[$.current]),c.createElement("section",{ref:s,"aria-label":`${N} ${M}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},S.map((s,t)=>{var r;let[m,u]=s.split("-");return C.length?c.createElement("ol",{key:s,dir:"auto"===v?ra():v,tabIndex:-1,ref:$,className:l,"data-sonner-toaster":!0,"data-theme":F,"data-y-position":m,"data-lifted":A&&C.length>1&&!i,"data-x-position":u,style:{"--front-toast-height":`${(null==(r=E[0])?void 0:r.height)||0}px`,"--width":"356px","--gap":`${j}px`,...p,...ia(o,d)},onBlur:e=>{B.current&&!e.currentTarget.contains(e.relatedTarget)&&(B.current=!1,P.current&&(P.current.focus({preventScroll:!0}),P.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||B.current||(B.current=!0,P.current=e.relatedTarget)},onMouseEnter:()=>z(!0),onMouseMove:()=>z(!0),onMouseLeave:()=>{R||z(!1)},onDragEnd:()=>z(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||I(!0)},onPointerUp:()=>I(!1)},C.filter(e=>!e.position&&0===t||e.position===s).map((t,r)=>{var l,o;return c.createElement(ta,{key:t.id,icons:y,index:r,toast:t,defaultRichColors:h,duration:null!=(l=null==f?void 0:f.duration)?l:x,className:null==f?void 0:f.className,descriptionClassName:null==f?void 0:f.descriptionClassName,invert:a,visibleToasts:g,closeButton:null!=(o=null==f?void 0:f.closeButton)?o:n,interacting:R,position:s,style:null==f?void 0:f.style,unstyled:null==f?void 0:f.unstyled,classNames:null==f?void 0:f.classNames,cancelButtonStyle:null==f?void 0:f.cancelButtonStyle,actionButtonStyle:null==f?void 0:f.actionButtonStyle,removeToast:D,toasts:C.filter(e=>e.position==t.position),heights:E.filter(e=>e.position==t.position),setHeights:_,expandByDefault:i,gap:j,loadingIcon:b,expanded:A,pauseWhenPageIsHidden:w,swipeDirections:e.swipeDirections})})):null}))});const la=({...a})=>{const{theme:t="system"}=null!=(r=e.useContext(Ls))?r:Us;var r;return s.jsx(na,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...a})},oa=h,da=x,ca=p,ma=e.forwardRef(({className:e,sideOffset:a=4,...t},r)=>s.jsx(u,{ref:r,sideOffset:a,className:zs("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));ma.displayName=u.displayName;const ua=xs.create({baseURL:"http://127.0.0.1:8000/api",headers:{"Content-Type":"application/json",Accept:"application/json"}});ua.interceptors.request.use(e=>{const s=localStorage.getItem("admin_token");return s&&(e.headers.Authorization=`Bearer ${s}`),e},e=>Promise.reject(e)),ua.interceptors.response.use(e=>e,e=>{var s;return 401===(null==(s=e.response)?void 0:s.status)&&(localStorage.removeItem("admin_token"),localStorage.removeItem("admin_user"),window.location.href="/"),Promise.reject(e)});const ha=()=>ua.get("/dashboard/stats"),xa=(e=5)=>ua.get(`/dashboard/recent-articles?limit=${e}`),pa=()=>ua.get("/posts"),ga=e=>ua.get(`/posts/${e}`),fa=e=>ua.post("/posts",e),va=(e,s)=>ua.put(`/posts/${e}`,s),ja=e=>ua.delete(`/posts/${e}`),ba=(e,s)=>ua.put(`/post-categories/${e}`,{category_ids:s}),ya=(e,s)=>ua.put(`/post-tags/${e}`,{tag_ids:s}),Na=e=>ua.get(`/post/${e}`),wa=(e=10)=>ua.get(`/top-posts?limit=${e}`),Ca=e=>ua.get(`/views-over-time/${e}`),ka=e=>ua.delete(`/comments/${e}`),Sa=e=>ua.patch(`/comments/${e}/approve`),Ea=e=>ua.patch(`/comments/${e}/mark-spam`),_a=e=>ua.get(`/posts/${e}/comments`),Aa=e=>ua.post("/media",e),za=e=>ua.post("/media/multiple",e),Ra=e=>ua.delete("/media/by-url",{params:{url:e}}),Ia=()=>ua.get("/categories"),Fa=e=>ua.post("/categories",e),Ta=(e,s)=>ua.put(`/categories/${e}`,s),$a=e=>ua.delete(`/categories/${e}`),Ma=()=>ua.get("/tags"),Pa=e=>ua.post("/tags",e),Ba=()=>ua.get("/users"),Da=e=>ua.post("/users",e),La=(e,s)=>ua.put(`/users/${e}`,s),Ua=e=>ua.delete(`/users/${e}`),Oa=e=>ua.put("/me",e),Va=e.createContext(void 0);function Ga({children:a}){const[t,r]=e.useState(null);e.useEffect(()=>{const e=localStorage.getItem("admin_user");e&&r(JSON.parse(e))},[]);return s.jsx(Va.Provider,{value:{user:t,login:async(e,s)=>{try{const a=await ua.post("/login",{email:e,password:s}),{access_token:t,user:i}=a.data;localStorage.setItem("admin_token",t),localStorage.setItem("admin_user",JSON.stringify(i)),r(i)}catch(a){throw a}},logout:async()=>{try{await ua.post("/logout")}catch(e){}finally{localStorage.removeItem("admin_token"),localStorage.removeItem("admin_user"),r(null)}},updateUser:e=>{localStorage.setItem("admin_user",JSON.stringify(e)),r(e)}},children:a})}function Ya(){const s=e.useContext(Va);if(void 0===s)throw new Error("useAuth must be used within an AuthProvider");return s}const qa=As("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ha=e.forwardRef(({className:e,variant:a,size:t,asChild:r=!1,...i},n)=>{const l=r?g:"button";return s.jsx(l,{className:zs(qa({variant:a,size:t,className:e})),ref:n,...i})});Ha.displayName="Button";const Ka=e.forwardRef(({className:e,type:a,...t},r)=>s.jsx("input",{type:a,className:zs("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));Ka.displayName="Input";const Wa=e.forwardRef(({className:e,orientation:a="horizontal",decorative:t=!0,...r},i)=>s.jsx(f,{ref:i,decorative:t,orientation:a,className:zs("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Wa.displayName=f.displayName;const Ja=C,Qa=j,Xa=e.forwardRef(({className:e,...a},t)=>s.jsx(v,{className:zs("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a,ref:t}));Xa.displayName=v.displayName;const Za=As("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),et=e.forwardRef(({side:e="right",className:a,children:t,...r},i)=>s.jsxs(Qa,{children:[s.jsx(Xa,{}),s.jsxs(b,{ref:i,className:zs(Za({side:e}),a),...r,children:[t,s.jsxs(y,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[s.jsx(n,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));et.displayName=b.displayName;e.forwardRef(({className:e,...a},t)=>s.jsx(N,{ref:t,className:zs("text-lg font-semibold text-foreground",e),...a})).displayName=N.displayName;function st({className:e,...a}){return s.jsx("div",{className:zs("animate-pulse rounded-md bg-muted",e),...a})}e.forwardRef(({className:e,...a},t)=>s.jsx(w,{ref:t,className:zs("text-sm text-muted-foreground",e),...a})).displayName=w.displayName;const at=e.createContext(null);function tt(){const s=e.useContext(at);if(!s)throw new Error("useSidebar must be used within a SidebarProvider.");return s}const rt=e.forwardRef(({defaultOpen:a=!0,open:t,onOpenChange:r,className:i,style:n,children:l,...o},d)=>{const c=function(){const[s,a]=e.useState(void 0);return e.useEffect(()=>{const e=window.matchMedia("(max-width: 767px)"),s=()=>{a(window.innerWidth<768)};return e.addEventListener("change",s),a(window.innerWidth<768),()=>e.removeEventListener("change",s)},[]),!!s}(),[m,u]=e.useState(!1),[h,x]=e.useState(a),p=t??h,g=e.useCallback(e=>{const s="function"==typeof e?e(p):e;r?r(s):x(s),document.cookie=`sidebar:state=${s}; path=/; max-age=604800`},[r,p]),f=e.useCallback(()=>c?u(e=>!e):g(e=>!e),[c,g,u]);e.useEffect(()=>{const e=e=>{"b"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),f())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[f]);const v=p?"expanded":"collapsed",j=e.useMemo(()=>({state:v,open:p,setOpen:g,isMobile:c,openMobile:m,setOpenMobile:u,toggleSidebar:f}),[v,p,g,c,m,u,f]);return s.jsx(at.Provider,{value:j,children:s.jsx(oa,{delayDuration:0,children:s.jsx("div",{style:{"--sidebar-width":"16rem","--sidebar-width-icon":"3rem",...n},className:zs("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",i),ref:d,...o,children:l})})})});rt.displayName="SidebarProvider";const it=e.forwardRef(({side:e="left",variant:a="sidebar",collapsible:t="offcanvas",className:r,children:i,...n},l)=>{const{isMobile:o,state:d,openMobile:c,setOpenMobile:m}=tt();return"none"===t?s.jsx("div",{className:zs("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:l,...n,children:i}):o?s.jsx(Ja,{open:c,onOpenChange:m,...n,children:s.jsx(et,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":"18rem"},side:e,children:s.jsx("div",{className:"flex h-full w-full flex-col",children:i})})}):s.jsxs("div",{ref:l,className:"group peer hidden md:block text-sidebar-foreground","data-state":d,"data-collapsible":"collapsed"===d?t:"","data-variant":a,"data-side":e,children:[s.jsx("div",{className:zs("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180","floating"===a||"inset"===a?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),s.jsx("div",{className:zs("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex","left"===e?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]","floating"===a||"inset"===a?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...n,children:s.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:i})})]})});it.displayName="Sidebar";e.forwardRef(({className:e,onClick:a,...t},r)=>{const{toggleSidebar:i}=tt();return s.jsxs(Ha,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:zs("h-7 w-7",e),onClick:e=>{null==a||a(e),i()},...t,children:[s.jsx(k,{}),s.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})}).displayName="SidebarTrigger";e.forwardRef(({className:e,...a},t)=>{const{toggleSidebar:r}=tt();return s.jsx("button",{ref:t,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:zs("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...a})}).displayName="SidebarRail";e.forwardRef(({className:e,...a},t)=>s.jsx("main",{ref:t,className:zs("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...a})).displayName="SidebarInset";e.forwardRef(({className:e,...a},t)=>s.jsx(Ka,{ref:t,"data-sidebar":"input",className:zs("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...a})).displayName="SidebarInput";e.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,"data-sidebar":"header",className:zs("flex flex-col gap-2 p-2",e),...a})).displayName="SidebarHeader";e.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,"data-sidebar":"footer",className:zs("flex flex-col gap-2 p-2",e),...a})).displayName="SidebarFooter";e.forwardRef(({className:e,...a},t)=>s.jsx(Wa,{ref:t,"data-sidebar":"separator",className:zs("mx-2 w-auto bg-sidebar-border",e),...a})).displayName="SidebarSeparator";const nt=e.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,"data-sidebar":"content",className:zs("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...a}));nt.displayName="SidebarContent";const lt=e.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,"data-sidebar":"group",className:zs("relative flex w-full min-w-0 flex-col p-2",e),...a}));lt.displayName="SidebarGroup";const ot=e.forwardRef(({className:e,asChild:a=!1,...t},r)=>{const i=a?g:"div";return s.jsx(i,{ref:r,"data-sidebar":"group-label",className:zs("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...t})});ot.displayName="SidebarGroupLabel";e.forwardRef(({className:e,asChild:a=!1,...t},r)=>{const i=a?g:"button";return s.jsx(i,{ref:r,"data-sidebar":"group-action",className:zs("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...t})}).displayName="SidebarGroupAction";const dt=e.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,"data-sidebar":"group-content",className:zs("w-full text-sm",e),...a}));dt.displayName="SidebarGroupContent";const ct=e.forwardRef(({className:e,...a},t)=>s.jsx("ul",{ref:t,"data-sidebar":"menu",className:zs("flex w-full min-w-0 flex-col gap-1",e),...a}));ct.displayName="SidebarMenu";const mt=e.forwardRef(({className:e,...a},t)=>s.jsx("li",{ref:t,"data-sidebar":"menu-item",className:zs("group/menu-item relative",e),...a}));mt.displayName="SidebarMenuItem";const ut=As("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),ht=e.forwardRef(({asChild:e=!1,isActive:a=!1,variant:t="default",size:r="default",tooltip:i,className:n,...l},o)=>{const d=e?g:"button",{isMobile:c,state:m}=tt(),u=s.jsx(d,{ref:o,"data-sidebar":"menu-button","data-size":r,"data-active":a,className:zs(ut({variant:t,size:r}),n),...l});return i?("string"==typeof i&&(i={children:i}),s.jsxs(da,{children:[s.jsx(ca,{asChild:!0,children:u}),s.jsx(ma,{side:"right",align:"center",hidden:"collapsed"!==m||c,...i})]})):u});ht.displayName="SidebarMenuButton";e.forwardRef(({className:e,asChild:a=!1,showOnHover:t=!1,...r},i)=>{const n=a?g:"button";return s.jsx(n,{ref:i,"data-sidebar":"menu-action",className:zs("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...r})}).displayName="SidebarMenuAction";e.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,"data-sidebar":"menu-badge",className:zs("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...a})).displayName="SidebarMenuBadge";e.forwardRef(({className:a,showIcon:t=!1,...r},i)=>{const n=e.useMemo(()=>`${Math.floor(40*Math.random())+50}%`,[]);return s.jsxs("div",{ref:i,"data-sidebar":"menu-skeleton",className:zs("rounded-md h-8 flex gap-2 px-2 items-center",a),...r,children:[t&&s.jsx(st,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),s.jsx(st,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":n}})]})}).displayName="SidebarMenuSkeleton";e.forwardRef(({className:e,...a},t)=>s.jsx("ul",{ref:t,"data-sidebar":"menu-sub",className:zs("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...a})).displayName="SidebarMenuSub";e.forwardRef(({...e},a)=>s.jsx("li",{ref:a,...e})).displayName="SidebarMenuSubItem";e.forwardRef(({asChild:e=!1,size:a="md",isActive:t,className:r,...i},n)=>{const l=e?g:"a";return s.jsx(l,{ref:n,"data-sidebar":"menu-sub-button","data-size":a,"data-active":t,className:zs("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground","sm"===a&&"text-xs","md"===a&&"text-sm","group-data-[collapsible=icon]:hidden",r),...i})}).displayName="SidebarMenuSubButton";const xt=[{title:"Dashboard",url:"/",icon:E,roles:["author","editor","admin"]},{title:"Articles",url:"/articles",icon:_,roles:["author","editor","admin"]},{title:"New Article",url:"/articles/create",icon:A,roles:["author","editor","admin"]},{title:"Categories",url:"/categories",icon:z,roles:["editor","admin"]},{title:"Users",url:"/users",icon:R,roles:["admin"]},{title:"Breaking News",url:"/breaking-news",icon:I,roles:["editor","admin"]},{title:"Block Editor Demo",url:"/block-editor-demo",icon:_,roles:["author","editor","admin"]},{title:"Settings",url:"/settings",icon:F,roles:["author","editor","admin"]}];function pt(){const{collapsed:e}=tt(),a=S(),{user:t}=Ya();a.pathname;const r=({isActive:e})=>e?"bg-blue-100 text-blue-700 font-medium":"hover:bg-gray-100",i=xt.filter(e=>t&&e.roles.includes(t.role));return s.jsx(it,{className:e?"w-16":"w-64",collapsible:!0,children:s.jsxs(nt,{className:"bg-white border-r",children:[s.jsxs("div",{className:"p-4 border-b",children:[s.jsx("h2",{className:"font-bold text-xl text-gray-900 "+(e?"hidden":"block"),children:"News Admin"}),e&&s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold",children:"N"})]}),s.jsxs(lt,{children:[s.jsx(ot,{className:e?"hidden":"block",children:"Navigation"}),s.jsx(dt,{children:s.jsx(ct,{children:i.map(a=>s.jsx(mt,{children:s.jsx(ht,{asChild:!0,children:s.jsxs(T,{to:a.url,end:"/"===a.url,className:r,children:[s.jsx(a.icon,{className:"h-4 w-4"}),!e&&s.jsx("span",{children:a.title})]})})},a.title))})})]})]})})}const gt=K,ft=W;e.forwardRef(({className:e,inset:a,children:t,...r},i)=>s.jsxs($,{ref:i,className:zs("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",a&&"pl-8",e),...r,children:[t,s.jsx(M,{className:"ml-auto h-4 w-4"})]})).displayName=$.displayName;e.forwardRef(({className:e,...a},t)=>s.jsx(P,{ref:t,className:zs("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})).displayName=P.displayName;const vt=e.forwardRef(({className:e,sideOffset:a=4,...t},r)=>s.jsx(B,{children:s.jsx(D,{ref:r,sideOffset:a,className:zs("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));vt.displayName=D.displayName;const jt=e.forwardRef(({className:e,inset:a,...t},r)=>s.jsx(L,{ref:r,className:zs("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a&&"pl-8",e),...t}));jt.displayName=L.displayName;e.forwardRef(({className:e,children:a,checked:t,...r},i)=>s.jsxs(U,{ref:i,className:zs("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:t,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(O,{children:s.jsx(V,{className:"h-4 w-4"})})}),a]})).displayName=U.displayName;e.forwardRef(({className:e,children:a,...t},r)=>s.jsxs(G,{ref:r,className:zs("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(O,{children:s.jsx(Y,{className:"h-2 w-2 fill-current"})})}),a]})).displayName=G.displayName;const bt=e.forwardRef(({className:e,inset:a,...t},r)=>s.jsx(q,{ref:r,className:zs("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",e),...t}));bt.displayName=q.displayName;const yt=e.forwardRef(({className:e,...a},t)=>s.jsx(H,{ref:t,className:zs("-mx-1 my-1 h-px bg-muted",e),...a}));yt.displayName=H.displayName;const Nt=e.forwardRef(({className:e,...a},t)=>s.jsx(J,{ref:t,className:zs("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...a}));Nt.displayName=J.displayName;const wt=e.forwardRef(({className:e,...a},t)=>s.jsx(Q,{ref:t,className:zs("aspect-square h-full w-full",e),...a}));wt.displayName=Q.displayName;const Ct=e.forwardRef(({className:e,...a},t)=>s.jsx(X,{ref:t,className:zs("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...a}));Ct.displayName=X.displayName;const kt=()=>{const{user:e,logout:a}=Ya();return s.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"News Admin"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Manage your news platform"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:null==e?void 0:e.name}),s.jsx("p",{className:"text-xs text-gray-600 capitalize",children:null==e?void 0:e.role})]}),s.jsxs(gt,{children:[s.jsx(ft,{asChild:!0,children:s.jsx(Ha,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:s.jsxs(Nt,{className:"h-10 w-10",children:[s.jsx(wt,{src:null==e?void 0:e.avatar,alt:null==e?void 0:e.name}),s.jsx(Ct,{className:"bg-blue-500 text-white",children:(null==e?void 0:e.name)?(t=e.name,t.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)):"U"})]})})}),s.jsxs(vt,{className:"w-56 bg-white",align:"end",forceMount:!0,children:[s.jsx(bt,{className:"font-normal",children:s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsx("p",{className:"text-sm font-medium leading-none",children:null==e?void 0:e.name}),s.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:null==e?void 0:e.email})]})}),s.jsx(yt,{}),s.jsx(jt,{asChild:!0,children:s.jsxs("a",{href:"/settings",children:[s.jsx(F,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Settings"})]})}),s.jsx(yt,{}),s.jsxs(jt,{onClick:()=>{a()},children:[s.jsx(Z,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Log out"})]})]})]})]})]})});var t},St=({children:e})=>s.jsx(rt,{children:s.jsxs("div",{className:"min-h-screen flex w-full bg-gray-50",children:[s.jsx(pt,{}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsx(kt,{}),s.jsx("main",{className:"flex-1 p-6 overflow-auto",children:e})]})]})}),Et=e.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:zs("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));Et.displayName="Card";const _t=e.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:zs("flex flex-col space-y-1.5 p-6",e),...a}));_t.displayName="CardHeader";const At=e.forwardRef(({className:e,...a},t)=>s.jsx("h3",{ref:t,className:zs("text-2xl font-semibold leading-none tracking-tight",e),...a}));At.displayName="CardTitle";const zt=e.forwardRef(({className:e,...a},t)=>s.jsx("p",{ref:t,className:zs("text-sm text-muted-foreground",e),...a}));zt.displayName="CardDescription";const Rt=e.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:zs("p-6 pt-0",e),...a}));Rt.displayName="CardContent";e.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:zs("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter";const It=()=>{const{user:e}=Ya(),{data:a,isLoading:t}=ee({queryKey:["dashboardStats"],queryFn:()=>ha()}),{data:r,isLoading:i}=ee({queryKey:["recentArticles"],queryFn:()=>xa(5)}),n=(null==a?void 0:a.data)?[{title:"Total Articles",value:a.data.total_articles.toString(),icon:_,color:"bg-blue-500"},{title:"Published",value:a.data.published_articles.toString(),icon:se,color:"bg-green-500"},{title:"Drafts",value:a.data.draft_articles.toString(),icon:ae,color:"bg-yellow-500"},{title:"Categories",value:a.data.total_categories.toString(),icon:z,color:"bg-purple-500"},{title:"Tags",value:a.data.total_tags.toString(),icon:te,color:"bg-purple-500"},..."admin"===(null==e?void 0:e.role)?[{title:"Total Users",value:a.data.total_users.toString(),icon:R,color:"bg-red-500"}]:[]]:[],l=(null==r?void 0:r.data)||[];return t?s.jsx(St,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",null==e?void 0:e.name,"!"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Loading dashboard data..."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((e,a)=>s.jsxs(Et,{children:[s.jsxs(_t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-20"}),s.jsx("div",{className:"h-8 w-8 bg-gray-200 rounded animate-pulse"})]}),s.jsx(Rt,{children:s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-16"})})]},a))})]})}):s.jsx(St,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",null==e?void 0:e.name,"!"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Here's what's happening with your news platform today."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map(e=>s.jsxs(Et,{children:[s.jsxs(_t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(At,{className:"text-sm font-medium",children:e.title}),s.jsx("div",{className:`p-2 rounded-lg ${e.color}`,children:s.jsx(e.icon,{className:"h-4 w-4 text-white"})})]}),s.jsx(Rt,{children:s.jsx("div",{className:"text-2xl font-bold",children:e.value})})]},e.title))}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(Et,{children:[s.jsxs(_t,{children:[s.jsx(At,{children:"Recent Articles"}),s.jsx(zt,{children:"Latest articles from your team"})]}),s.jsx(Rt,{children:s.jsx("div",{className:"space-y-4",children:i?[...Array(3)].map((e,a)=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4 mb-2"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded animate-pulse w-1/2"})]}),s.jsx("div",{className:"h-6 w-16 bg-gray-200 rounded-full animate-pulse"})]},a)):l.length>0?l.map(e=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-sm",children:e.title}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["By ",e.author," • ",e.date]})]}),s.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium "+("published"===e.status?"bg-green-100 text-green-800":"draft"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.status})]},e.id)):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(_,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{children:"No articles found"})]})})})]}),s.jsxs(Et,{children:[s.jsxs(_t,{children:[s.jsx(At,{children:"Quick Actions"}),s.jsx(zt,{children:"Common tasks you can perform"})]}),s.jsx(Rt,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("a",{href:"/articles/create",className:"flex items-center p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(_,{className:"h-5 w-5 text-blue-600 mr-3"}),s.jsx("span",{className:"font-medium",children:"Create New Article"})]}),s.jsxs("a",{href:"/articles",className:"flex items-center p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(se,{className:"h-5 w-5 text-green-600 mr-3"}),s.jsx("span",{className:"font-medium",children:"View All Articles"})]}),("editor"===(null==e?void 0:e.role)||"admin"===(null==e?void 0:e.role))&&s.jsxs("a",{href:"/categories",className:"flex items-center p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(z,{className:"h-5 w-5 text-purple-600 mr-3"}),s.jsx("span",{className:"font-medium",children:"Manage Categories"})]}),"admin"===(null==e?void 0:e.role)&&s.jsxs("a",{href:"/users",className:"flex items-center p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(R,{className:"h-5 w-5 text-red-600 mr-3"}),s.jsx("span",{className:"font-medium",children:"Manage Users"})]})]})})]})]})]})})},Ft=As("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Tt=e.forwardRef(({className:e,...a},t)=>s.jsx(re,{ref:t,className:zs(Ft(),e),...a}));Tt.displayName=re.displayName;const $t=As("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Mt=e.forwardRef(({className:e,variant:a,...t},r)=>s.jsx("div",{ref:r,role:"alert",className:zs($t({variant:a}),e),...t}));Mt.displayName="Alert";e.forwardRef(({className:e,...a},t)=>s.jsx("h5",{ref:t,className:zs("mb-1 font-medium leading-none tracking-tight",e),...a})).displayName="AlertTitle";const Pt=e.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:zs("text-sm [&_p]:leading-relaxed",e),...a}));Pt.displayName="AlertDescription";const Bt=()=>{const[a,t]=e.useState(""),[r,i]=e.useState(""),[n,l]=e.useState(""),[o,d]=e.useState(!1),{login:c,user:m}=Ya(),u=ie();if(m)return u("/"),null;return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:s.jsxs(Et,{className:"w-full max-w-md",children:[s.jsxs(_t,{className:"space-y-1",children:[s.jsx(At,{className:"text-2xl font-bold text-center",children:"Admin Login"}),s.jsx(zt,{className:"text-center",children:"Sign in to access the news admin dashboard"})]}),s.jsx(Rt,{children:s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),l(""),d(!0);try{await c(a,r),u("/")}catch(s){l(s.message||"Login failed. Please check your credentials.")}finally{d(!1)}},className:"space-y-4",children:[n&&s.jsxs(Mt,{variant:"destructive",children:[s.jsx(ne,{className:"h-4 w-4"}),s.jsx(Pt,{children:n})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Tt,{htmlFor:"email",children:"Email"}),s.jsx(Ka,{id:"email",type:"email",placeholder:"Enter your email",value:a,onChange:e=>t(e.target.value),required:!0,disabled:o})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Tt,{htmlFor:"password",children:"Password"}),s.jsx(Ka,{id:"password",type:"password",placeholder:"Enter your password",value:r,onChange:e=>i(e.target.value),required:!0,disabled:o})]}),s.jsxs(Ha,{type:"submit",className:"w-full",disabled:o,children:[o&&s.jsx(le,{className:"mr-2 h-4 w-4 animate-spin"}),o?"Signing in...":"Sign In"]})]})})]})})},Dt=()=>{const{user:e,isLoading:a}=Ya();return ie(),a?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(le,{className:"h-8 w-8 animate-spin"})}):e?s.jsx(It,{}):s.jsx(Bt,{})},Lt=As("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ut({className:e,variant:a,...t}){return s.jsx("div",{className:zs(Lt({variant:a}),e),...t})}const Ot=()=>{const{user:a}=Ya(),[t,r]=e.useState([]),[i,n]=e.useState(!0),[l,o]=e.useState(""),[d,c]=e.useState("all");e.useEffect(()=>{m()},[]);const m=async()=>{try{n(!0);const e=await pa();r(e.data)}catch(e){ks({title:"Error",description:"Failed to fetch articles. Please try again.",variant:"destructive"})}finally{n(!1)}},u=e=>"admin"===(null==a?void 0:a.role)||"author"===(null==a?void 0:a.role)&&e.user.id===a.id,h=e=>"admin"===(null==a?void 0:a.role)||"author"===(null==a?void 0:a.role)&&e.user.id===a.id,x=t.filter(e=>{const s=e.title.toLowerCase().includes(l.toLowerCase())||(e.user.fname+" "+e.user.lname).toLowerCase().includes(l.toLowerCase()),t="all"===d||e.status===d,r="author"!==(null==a?void 0:a.role)||e.user.id===a.id;return s&&t&&r});return i?s.jsx(St,{children:s.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:s.jsx(le,{className:"h-8 w-8 animate-spin text-gray-500"})})}):s.jsx(St,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Articles"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage and organize your news articles"})]}),s.jsx(Ha,{asChild:!0,children:s.jsxs("a",{href:"/articles/create",children:[s.jsx(A,{className:"h-4 w-4 mr-2"}),"New Article"]})})]}),s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(Ka,{placeholder:"Search articles...",value:l,onChange:e=>o(e.target.value),className:"pl-9"})]}),s.jsxs("select",{value:d,onChange:e=>c(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm","aria-label":"Filter articles by status",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"published",children:"Published"}),s.jsx("option",{value:"draft",children:"Draft"}),s.jsx("option",{value:"archived",children:"Archived"})]})]}),s.jsx("div",{className:"space-y-4",children:x.map(e=>{var a;return s.jsx(Et,{className:"overflow-hidden",children:s.jsx(Rt,{className:"p-6",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Ut,{variant:"published"===e.status?"default":"secondary",children:e.status}),null==(a=e.categories)?void 0:a.map(e=>s.jsx("span",{className:"text-sm text-gray-500",children:e.name},e.id))]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:e.title}),s.jsx("p",{className:"text-gray-600 mb-3 line-clamp-2",children:e.body}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[s.jsxs("span",{children:["By ",e.user.fname," ",e.user.lname]}),e.published_at&&s.jsx("span",{children:new Date(e.published_at).toLocaleDateString()}),"published"===e.status&&void 0!==e.views_count&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(se,{className:"h-3 w-3"}),e.views_count," views"]})]})]}),s.jsxs(gt,{children:[s.jsx(ft,{asChild:!0,children:s.jsx(Ha,{variant:"ghost",size:"sm",children:s.jsx(de,{className:"h-4 w-4"})})}),s.jsxs(vt,{align:"end",className:"bg-white",children:[u(e)&&s.jsx(jt,{asChild:!0,children:s.jsxs("a",{href:`/articles/edit/${e.id}`,children:[s.jsx(ce,{className:"h-4 w-4 mr-2"}),"Edit"]})}),s.jsx(jt,{asChild:!0,children:s.jsxs("a",{href:`/articles/${e.id}/analytics`,children:[s.jsx(me,{className:"h-4 w-4 mr-2"}),"Analytics"]})}),h(e)&&s.jsxs(jt,{onClick:()=>(async(e,s)=>{try{await ja(e.toString()),r(t.filter(s=>s.id!==e)),ks({title:"Article deleted",description:`"${s}" has been deleted successfully.`})}catch(a){ks({title:"Error",description:"Failed to delete article. Please try again.",variant:"destructive"})}})(e.id,e.title),className:"text-red-600",children:[s.jsx(ue,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})})},e.id)})}),0===x.length&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(_,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No articles found"}),s.jsx("p",{className:"text-gray-600",children:l?"Try adjusting your search terms":"Create your first article to get started"})]})]})})},Vt=e.forwardRef(({className:e,...a},t)=>s.jsx("textarea",{className:zs("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...a}));Vt.displayName="Textarea";const Gt=Ee,Yt=_e,qt=e.forwardRef(({className:e,children:a,...t},r)=>s.jsxs(he,{ref:r,className:zs("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[a,s.jsx(xe,{asChild:!0,children:s.jsx(pe,{className:"h-4 w-4 opacity-50"})})]}));qt.displayName=he.displayName;const Ht=e.forwardRef(({className:e,...a},t)=>s.jsx(ge,{ref:t,className:zs("flex cursor-default items-center justify-center py-1",e),...a,children:s.jsx(fe,{className:"h-4 w-4"})}));Ht.displayName=ge.displayName;const Kt=e.forwardRef(({className:e,...a},t)=>s.jsx(ve,{ref:t,className:zs("flex cursor-default items-center justify-center py-1",e),...a,children:s.jsx(pe,{className:"h-4 w-4"})}));Kt.displayName=ve.displayName;const Wt=e.forwardRef(({className:e,children:a,position:t="popper",...r},i)=>s.jsx(je,{children:s.jsxs(be,{ref:i,className:zs("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[s.jsx(Ht,{}),s.jsx(ye,{className:zs("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),s.jsx(Kt,{})]})}));Wt.displayName=be.displayName;e.forwardRef(({className:e,...a},t)=>s.jsx(Ne,{ref:t,className:zs("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a})).displayName=Ne.displayName;const Jt=e.forwardRef(({className:e,children:a,...t},r)=>s.jsxs(we,{ref:r,className:zs("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Ce,{children:s.jsx(V,{className:"h-4 w-4"})})}),s.jsx(ke,{children:a})]}));Jt.displayName=we.displayName;e.forwardRef(({className:e,...a},t)=>s.jsx(Se,{ref:t,className:zs("-mx-1 my-1 h-px bg-muted",e),...a})).displayName=Se.displayName;const Qt=({postId:a,onImagesChange:t,initialImages:r=[]})=>{const[i,l]=e.useState(r),[o,d]=e.useState(!1);e.useEffect(()=>{l(r)},[r]),e.useEffect(()=>{t(i)},[i,t]);const c=(e,s,a)=>{l(t=>t.map((t,r)=>r===e?{...t,[s]:a}:t))},m=(e,s)=>{s<0||s>=i.length||l(a=>{const t=[...a],[r]=t.splice(e,1);return t.splice(s,0,r),t.map((e,s)=>({...e,order:s}))})};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Tt,{className:"text-lg font-semibold",children:"Article Images"}),s.jsx("div",{className:"flex gap-2",children:a&&i.length>0&&s.jsx(Ha,{variant:"outline",size:"sm",onClick:async()=>{if(a&&0!==i.length)try{const e=i.map(e=>({url:e.url,type:e.type,subtype:e.subtype||"secondary",alt_text:e.alt_text||"",order:e.order}));await za({post_id:a,images:e}),ks({title:"Success",description:"Images saved successfully"})}catch(e){ks({title:"Error",description:"Failed to save images",variant:"destructive"})}},children:"Save Images"})})]}),s.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-md p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ae,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),s.jsxs("div",{className:"flex text-sm text-gray-600 justify-center",children:[s.jsxs("label",{htmlFor:"image-upload",className:"relative cursor-pointer rounded-md font-medium text-primary hover:text-primary/80 focus-within:outline-none focus-within:ring-2 focus-within:ring-primary",children:[s.jsx("span",{children:"Upload a file"}),s.jsx("input",{id:"image-upload",name:"image-upload",type:"file",accept:"image/*",className:"sr-only",onChange:async e=>{var s;const a=null==(s=e.target.files)?void 0:s[0];if(a){d(!0);try{const e=URL.createObjectURL(a),s={url:await gs(a),type:"image",subtype:"secondary",alt_text:a.name,order:i.length,preview:e};l(e=>[...e,s]),ks({title:"Success",description:"Image uploaded successfully"})}catch(t){ks({title:"Error",description:t.message||"Failed to upload image",variant:"destructive"})}finally{d(!1)}}},disabled:o})]}),s.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"}),o&&s.jsx("p",{className:"text-sm text-blue-600 mt-2",children:"Uploading..."})]})}),i.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h4",{className:"font-medium",children:["Uploaded Images (",i.length,")"]}),i.map((e,a)=>s.jsxs(Et,{className:"relative",children:[s.jsx(_t,{className:"pb-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ze,{className:"h-4 w-4 text-gray-400 cursor-move"}),s.jsxs(At,{className:"text-sm",children:["Image ",a+1,"featured"===e.subtype&&s.jsxs(Ut,{variant:"secondary",className:"ml-2",children:[s.jsx(Re,{className:"h-3 w-3 mr-1"}),"Featured"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Ha,{variant:"outline",size:"sm",onClick:()=>(e=>{l(s=>s.map((s,a)=>({...s,subtype:a===e?"featured":"secondary"})))})(a),disabled:"featured"===e.subtype,children:[s.jsx(Re,{className:"h-3 w-3 mr-1"}),"Set Featured"]}),s.jsx(Ha,{variant:"destructive",size:"sm",onClick:()=>(async e=>{const s=i[e];try{!s.id&&s.url&&await fs(s.url),l(s=>s.filter((s,a)=>a!==e)),l(e=>e.map((e,s)=>({...e,order:s}))),ks({title:"Success",description:"Image removed successfully"})}catch(a){ks({title:"Error",description:"Failed to remove image",variant:"destructive"})}})(a),children:s.jsx(n,{className:"h-4 w-4"})})]})]})}),s.jsxs(Rt,{className:"space-y-4",children:[s.jsx("div",{className:"relative",children:s.jsx("img",{src:e.preview||e.url,alt:e.alt_text||"Article image",className:"w-full h-48 object-cover rounded-md"})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:`image-type-${a}`,children:"Image Type"}),s.jsxs(Gt,{value:e.subtype||"secondary",onValueChange:e=>c(a,"subtype",e),children:[s.jsx(qt,{children:s.jsx(Yt,{})}),s.jsxs(Wt,{children:[s.jsx(Jt,{value:"featured",children:"Featured Image"}),s.jsx(Jt,{value:"secondary",children:"Secondary Image"}),s.jsx(Jt,{value:"gallery",children:"Gallery Image"})]})]})]}),s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:`image-alt-${a}`,children:"Alt Text"}),s.jsx(Ka,{id:`image-alt-${a}`,value:e.alt_text||"",onChange:e=>c(a,"alt_text",e.target.value),placeholder:"Describe the image for accessibility"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ha,{variant:"outline",size:"sm",onClick:()=>m(a,a-1),disabled:0===a,children:"Move Up"}),s.jsx(Ha,{variant:"outline",size:"sm",onClick:()=>m(a,a+1),disabled:a===i.length-1,children:"Move Down"})]})]})]},a))]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Featured Image:"})," The main image displayed at the top of the article"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Secondary Image:"})," Additional images that can be displayed within the article content"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Gallery Image:"})," Images for photo galleries or slideshows"]})]})]})},Xt=({value:a,onChange:t,placeholder:r="Start writing your article...",onInsertAIContent:i})=>{const[n,l]=e.useState(a),[o,d]=e.useState(null),[c,m]=e.useState(!1),u=e.useRef(null);e.useEffect(()=>{l(a)},[a]),e.useEffect(()=>{t(n)},[n,t]);const h=e=>{const s={id:x(),type:"text",content:e||"",order:n.length};l(e=>[...e,s])};e.useEffect(()=>{i&&i(h)},[i]);const x=()=>Math.random().toString(36).substr(2,9),p=e=>{const s={id:x(),type:"text",content:"",order:void 0!==e?e+1:n.length},a=[...n];void 0!==e?(a.splice(e+1,0,s),a.forEach((e,s)=>{e.order=s})):a.push(s),l(a)},g=async e=>{u.current&&u.current.click()},f=(e,s)=>{l(a=>a.map(a=>a.id===e?{...a,...s}:a))},v=(e,s)=>{s<0||s>=n.length||l(a=>{const t=[...a],[r]=t.splice(e,1);return t.splice(s,0,r),t.map((e,s)=>({...e,order:s}))})},j=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},b=(e,a)=>{const t=o===e.id;return s.jsxs("div",{className:`relative group ${t?"opacity-50":""} transition-all duration-200`,draggable:!0,onDragStart:s=>((e,s)=>{d(s),e.dataTransfer.effectAllowed="move"})(s,e.id),onDragOver:j,onDrop:e=>((e,s)=>{if(e.preventDefault(),!o)return;const a=n.findIndex(e=>e.id===o);-1!==a&&v(a,s),d(null)})(e,a),children:[s.jsxs("div",{className:"absolute -left-12 top-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex flex-col gap-1",children:[s.jsx(Ha,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>p(a),title:"Add text block",children:s.jsx(Ie,{className:"h-4 w-4"})}),s.jsx(Ha,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>g(),title:"Add image block",children:s.jsx(Fe,{className:"h-4 w-4"})}),s.jsx(Ha,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>(async e=>{const s=n.find(s=>s.id===e);if("image"===(null==s?void 0:s.type)&&s.imageUrl)try{await fs(s.imageUrl)}catch(a){}l(s=>s.filter(s=>s.id!==e).map((e,s)=>({...e,order:s})))})(e.id),title:"Remove block",children:s.jsx(Te,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"absolute -left-6 top-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:s.jsx(ze,{className:"h-4 w-4 text-gray-400 cursor-move"})}),s.jsx(Et,{className:"mb-4 border-2 border-transparent hover:border-gray-200 transition-colors duration-200",children:s.jsx(Rt,{className:"p-4",children:"text"===e.type?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Ut,{variant:"outline",className:"text-xs",children:[s.jsx(Ie,{className:"h-3 w-3 mr-1"}),"Text"]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(Ha,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>v(a,a-1),disabled:0===a,children:s.jsx($e,{className:"h-3 w-3"})}),s.jsx(Ha,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>v(a,a+1),disabled:a===n.length-1,children:s.jsx(Me,{className:"h-3 w-3"})})]})]}),s.jsx(Vt,{value:e.content||"",onChange:s=>f(e.id,{content:s.target.value}),placeholder:"Write your content here... (You can also use AI to generate content from your title)",className:"min-h-[120px] resize-none border-0 focus:ring-0 p-0 text-base"})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Ut,{variant:"outline",className:"text-xs",children:[s.jsx(Fe,{className:"h-3 w-3 mr-1"}),"Image"]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(Ha,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>v(a,a-1),disabled:0===a,children:s.jsx($e,{className:"h-3 w-3"})}),s.jsx(Ha,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>v(a,a+1),disabled:a===n.length-1,children:s.jsx(Me,{className:"h-3 w-3"})})]})]}),s.jsx("div",{className:"relative",children:s.jsx("img",{src:e.imageUrl,alt:e.imageAlt||"Article image",className:"w-full max-h-96 object-cover rounded-md"})}),s.jsx(Ka,{value:e.imageAlt||"",onChange:s=>f(e.id,{imageAlt:s.target.value}),placeholder:"Image description (alt text)",className:"text-sm"})]})})})]},e.id)};return s.jsxs("div",{className:"relative",children:[s.jsx("input",{ref:u,type:"file",accept:"image/*",className:"hidden",onChange:async e=>{var s;const a=null==(s=e.target.files)?void 0:s[0];if(a){m(!0);try{const e=await gs(a),s={id:x(),type:"image",content:"",imageUrl:e,imageAlt:a.name,order:n.length};l(e=>[...e,s]),ks({title:"Success",description:"Image uploaded successfully"})}catch(t){ks({title:"Error",description:t.message||"Failed to upload image",variant:"destructive"})}finally{m(!1),u.current&&(u.current.value="")}}},disabled:c,title:"Upload image"}),0===n.length&&s.jsx("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-center gap-2",children:[s.jsxs(Ha,{variant:"outline",onClick:()=>p(),className:"flex items-center gap-2",children:[s.jsx(Ie,{className:"h-4 w-4"}),"Add Text Block"]}),s.jsxs(Ha,{variant:"outline",onClick:()=>g(),className:"flex items-center gap-2",disabled:c,children:[s.jsx(Fe,{className:"h-4 w-4"}),c?"Uploading...":"Add Image Block"]})]}),s.jsx("p",{className:"text-gray-500",children:r}),s.jsx("div",{className:"text-xs text-gray-400 max-w-md mx-auto",children:s.jsxs("p",{children:["💡 ",s.jsx("strong",{children:"Pro tip:"}),' Start with a text block, then use the AI "Generate from Title" button to create content based on your article title.']})})]})}),s.jsx("div",{className:"space-y-0",children:n.map((e,s)=>b(e,s))}),n.length>0&&s.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[s.jsxs(Ha,{variant:"outline",onClick:()=>p(),className:"flex items-center gap-2",children:[s.jsx(A,{className:"h-4 w-4"}),"Add Text"]}),s.jsxs(Ha,{variant:"outline",onClick:()=>g(),className:"flex items-center gap-2",disabled:c,children:[s.jsx(A,{className:"h-4 w-4"}),c?"Uploading...":"Add Image"]})]})]})},Zt=()=>{const a=ie(),{user:t}=Ya(),[r,i]=e.useState(!1),[l,o]=e.useState(!1),[d,c]=e.useState(!1),[m,u]=e.useState(null),[h,x]=e.useState([]),[p,g]=e.useState([]),[f,v]=e.useState(""),[j,b]=e.useState([]),[y,N]=e.useState(""),[w,C]=e.useState([]),[k,S]=e.useState([]),[E,_]=e.useState(""),[A,z]=e.useState([]),[R,I]=e.useState(""),[F,T]=e.useState({title:"",excerpt:"",body:"",status:"draft",contentBlocks:[]}),[$,M]=e.useState([]),[P,B]=e.useState({title:!1,excerpt:!1,content:!1}),[D,L]=e.useState(null);e.useEffect(()=>{(async()=>{u(null),await Promise.all([U(),O()])})()},[]),e.useEffect(()=>{g(h.filter(e=>e.name.toLowerCase().includes(f.toLowerCase())))},[f,h]),e.useEffect(()=>{S(w.filter(e=>e.name.toLowerCase().includes(E.toLowerCase())))},[E,w]);const U=async()=>{o(!0);try{const e=await Ia();x(e.data)}catch(e){u(e.message||"Failed to fetch categories")}finally{o(!1)}},O=async()=>{c(!0);try{const e=await Ma();C(e.data)}catch(e){u(e.message||"Failed to fetch tags")}finally{c(!1)}},V=e=>{const{name:s,value:a}=e.target;T(e=>({...e,[s]:a}))},G=async()=>{const e=y.trim();if(!e)return;let s=h.find(s=>s.name.toLowerCase()===e.toLowerCase());if(!s)try{const a=await Fa({name:e});s=a.data,x(e=>[...e,s])}catch(a){return void ks({title:"Error",description:a.message||"Failed to create category",variant:"destructive"})}s&&!j.includes(s.id)&&b([...j,s.id]),N("")},Y=e=>b(j.filter(s=>s!==e)),q=async()=>{const e=R.trim();if(!e)return;let s=w.find(s=>s.name.toLowerCase()===e.toLowerCase());if(!s)try{const a=await Pa({name:e});s=a.data,C(e=>[...e,s])}catch(a){return void ks({title:"Error",description:a.message||"Failed to create tag",variant:"destructive"})}s&&!A.includes(s.id)&&z([...A,s.id]),I("")},H=e=>z(A.filter(s=>s!==e)),K=async e=>{if("title"!==e||0!==F.contentBlocks.length)if("title"===e||F.title.trim()){B(s=>({...s,[e]:!0}));try{let s="";if("title"===e){if(s=F.contentBlocks.filter(e=>"text"===e.type).map(e=>e.content).join("\n\n"),!s.trim())return void ks({title:"Error",description:"Please add some text content first to generate a title",variant:"destructive"})}else s=F.title;const a=await ps(s,e);if("content"===e){const e=a.content||"";if(D)D(e);else{const s={id:Math.random().toString(36).substr(2,9),type:"text",content:e||"",order:F.contentBlocks.length};T(e=>({...e,contentBlocks:[...e.contentBlocks,s]}))}}else{const s="title"===e?a.title:a.excerpt;T(a=>({...a,[e]:s||""}))}ks({title:"Success",description:`${e.charAt(0).toUpperCase()+e.slice(1)} generated successfully`})}catch(s){ks({title:"Error",description:s.message||"Failed to generate suggestion",variant:"destructive"})}finally{B(s=>({...s,[e]:!1}))}}else ks({title:"Error",description:"Please enter a title first",variant:"destructive"});else ks({title:"Error",description:"Please add some content first to generate a title",variant:"destructive"})},W=[...p].sort((e,s)=>{const a=j.includes(e.id),t=j.includes(s.id);return a&&!t?-1:!a&&t?1:e.name.localeCompare(s.name)}),J=[...k].sort((e,s)=>{const a=A.includes(e.id),t=A.includes(s.id);return a&&!t?-1:!a&&t?1:e.name.localeCompare(s.name)});return s.jsx(St,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Create Article"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Create a new article for your news platform"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(Ha,{variant:"outline",onClick:()=>a("/articles"),children:"Cancel"}),s.jsx(Ha,{onClick:async()=>{try{if(i(!0),!F.title.trim())return void ks({title:"Error",description:"Please enter a title for your article",variant:"destructive"});if(!F.contentBlocks.some(e=>"text"===e.type&&""!==e.content.trim()))return void ks({title:"Error",description:"Please add some text content to your article",variant:"destructive"});if(0===j.length)return void ks({title:"Error",description:"Please select at least one category",variant:"destructive"});const e=F.contentBlocks.map(e=>"text"===e.type?e.content||"":"image"===e.type?`[IMAGE: ${e.imageUrl}] ${e.imageAlt||""}`:"").filter(e=>e.trim()).join("\n\n"),s={user_id:null==t?void 0:t.id,title:F.title,body:e,status:F.status,published_at:"published"===F.status?(new Date).toISOString():null},r=(await fa(s)).data.id,n=[...$,...F.contentBlocks.filter(e=>"image"===e.type).map((e,s)=>({url:e.imageUrl,type:"image",subtype:"content",alt_text:e.imageAlt||"",order:s}))];if(n.length>0){const e=n.map(e=>({url:e.url,type:e.type,subtype:e.subtype||"secondary",alt_text:e.alt_text||"",order:e.order}));await za({post_id:r,images:e})}j.length>0&&await ba(r.toString(),j),A.length>0&&await ya(r.toString(),A),ks({title:"Success",description:"Article created successfully"}),a("/articles")}catch(e){ks({title:"Error",description:"Failed to create article. Please try again.",variant:"destructive"})}finally{i(!1)}},disabled:r,children:r?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"loading loading-spinner"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Save Article"]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(Et,{children:[s.jsx(_t,{children:s.jsxs(At,{className:"flex items-center justify-between",children:["Title",s.jsxs(Ha,{variant:"outline",size:"sm",onClick:()=>K("title"),disabled:P.title,title:"Generate title from your content (add content first)",children:[s.jsx(Be,{className:"h-4 w-4 mr-2"}),P.title?"Generating...":"Generate from Content"]})]})}),s.jsx(Rt,{children:s.jsx(Ka,{name:"title",value:F.title,onChange:V,placeholder:"Enter article title or write content first, then generate title with AI...",className:"text-lg"})})]}),s.jsxs(Et,{children:[s.jsx(_t,{children:s.jsxs(At,{className:"flex items-center justify-between",children:["Excerpt",s.jsxs(Ha,{variant:"outline",size:"sm",onClick:()=>K("excerpt"),disabled:P.excerpt,title:"Generate excerpt from your title",children:[s.jsx(Be,{className:"h-4 w-4 mr-2"}),P.excerpt?"Generating...":"Generate from Title"]})]})}),s.jsx(Rt,{children:s.jsx(Vt,{name:"excerpt",value:F.excerpt,onChange:V,placeholder:"Brief description of the article (150-200 characters). Generate with AI after adding a title...",rows:3})})]}),s.jsxs(Et,{children:[s.jsx(_t,{children:s.jsxs(At,{className:"flex items-center justify-between",children:["Content",s.jsxs(Ha,{variant:"outline",size:"sm",onClick:()=>K("content"),disabled:P.content,title:"Generate content from your title",children:[s.jsx(Be,{className:"h-4 w-4 mr-2"}),P.content?"Generating...":"Generate from Title"]})]})}),s.jsxs(Rt,{children:[s.jsx(Xt,{value:F.contentBlocks,onChange:e=>{T(s=>({...s,contentBlocks:e}))},onInsertAIContent:e=>{L(()=>e)},placeholder:"Start writing your article with text and image blocks..."}),s.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Be,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"AI Writing Assistant Tips:"}),s.jsxs("ul",{className:"space-y-1 text-xs",children:[s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Title:"})," Write content first, then generate a title from it"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Excerpt:"})," Add a title first, then generate an excerpt"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Content:"})," Add a title first, then generate article content"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Blocks:"})," Mix text and images for better storytelling"]})]})]})]})})]})]}),s.jsx(Et,{children:s.jsx(Rt,{className:"pt-6",children:s.jsx(Qt,{onImagesChange:e=>{M(e)},initialImages:$})})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Et,{children:[s.jsx(_t,{children:s.jsx(At,{children:"Status"})}),s.jsx(Rt,{children:s.jsxs(Gt,{value:F.status,onValueChange:e=>{T(s=>({...s,status:e}))},children:[s.jsx(qt,{children:s.jsx(Yt,{})}),s.jsxs(Wt,{children:[s.jsx(Jt,{value:"draft",children:"Draft"}),s.jsx(Jt,{value:"published",children:"Published"}),s.jsx(Jt,{value:"archived",children:"Archived"})]})]})})]}),s.jsxs(Et,{children:[s.jsx(_t,{children:s.jsx(At,{children:"Categories"})}),s.jsxs(Rt,{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ka,{value:f,onChange:e=>v(e.target.value),placeholder:"Search categories..."}),s.jsx(Ha,{variant:"outline",onClick:()=>v(""),children:"Clear"})]}),s.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:W.map(e=>s.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[s.jsx("span",{className:"text-sm",children:e.name}),s.jsx(Ha,{variant:j.includes(e.id)?"default":"outline",size:"sm",onClick:()=>j.includes(e.id)?Y(e.id):b([...j,e.id]),children:j.includes(e.id)?"Selected":"Select"})]},e.id))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ka,{value:y,onChange:e=>N(e.target.value),placeholder:"New category name...",onKeyPress:e=>"Enter"===e.key&&G()}),s.jsx(Ha,{variant:"outline",onClick:G,children:"Add"})]}),j.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(e=>{const a=h.find(s=>s.id===e);return s.jsxs(Ut,{variant:"secondary",className:"cursor-pointer",onClick:()=>Y(e),children:[null==a?void 0:a.name,s.jsx(n,{className:"h-3 w-3 ml-1"})]},e)})})]})]}),s.jsxs(Et,{children:[s.jsx(_t,{children:s.jsx(At,{children:"Tags"})}),s.jsxs(Rt,{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ka,{value:E,onChange:e=>_(e.target.value),placeholder:"Search tags..."}),s.jsx(Ha,{variant:"outline",onClick:()=>_(""),children:"Clear"})]}),s.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:J.map(e=>s.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[s.jsx("span",{className:"text-sm",children:e.name}),s.jsx(Ha,{variant:A.includes(e.id)?"default":"outline",size:"sm",onClick:()=>A.includes(e.id)?H(e.id):z([...A,e.id]),children:A.includes(e.id)?"Selected":"Select"})]},e.id))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ka,{value:R,onChange:e=>I(e.target.value),placeholder:"New tag name...",onKeyPress:e=>"Enter"===e.key&&q()}),s.jsx(Ha,{variant:"outline",onClick:q,children:"Add"})]}),A.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:A.map(e=>{const a=w.find(s=>s.id===e);return s.jsxs(Ut,{variant:"secondary",className:"cursor-pointer",onClick:()=>H(e),children:[null==a?void 0:a.name,s.jsx(n,{className:"h-3 w-3 ml-1"})]},e)})})]})]})]})]})]})})},er=()=>{const{id:a}=De(),t=ie(),[r,i]=e.useState(""),[l,o]=e.useState(""),[d,c]=e.useState(""),[m,u]=e.useState([]),[h,x]=e.useState([]),[p,g]=e.useState([]),[f,v]=e.useState(""),[j,b]=e.useState([]),[y,N]=e.useState([]),[w,C]=e.useState([]),[k,S]=e.useState(""),[E,_]=e.useState([]),[A,z]=e.useState(""),[R,I]=e.useState(""),[F,T]=e.useState(null),[$,M]=e.useState(null),[P,B]=e.useState("draft"),[D,L]=e.useState(!1),[U,O]=e.useState({title:!1,excerpt:!1,content:!1}),[V,G]=e.useState(null),[Y,q]=e.useState(null);e.useEffect(()=>{a&&(async()=>{var e;try{const s=(await ga(a)).data;i(s.title),c(s.body),o(s.excerpt||""),B("published"===s.status?"published":"draft");const t=(e=>{const s=[];let a=0;if(e.includes("[IMAGE:")){const t=e.split("\n").filter(e=>e.trim());for(const e of t){const t=e.match(/\[IMAGE: (.+?)\]/);if(t){const r=t[1],i=e.replace(/\[IMAGE: .+?\]/,"").trim();s.push({id:"block-"+a++,type:"image",content:"",imageUrl:r,imageAlt:i,order:s.length})}else e.trim()&&s.push({id:"block-"+a++,type:"text",content:e||"",order:s.length})}}else e.trim()&&s.push({id:"block-"+a++,type:"text",content:e.trim()||"",order:0});return s})(s.body,s.media);u(t);const r=s.image_url||(s.media&&s.media.length>0?null==(e=s.media.find(e=>"image"===e.type))?void 0:e.url:null);T(r||null),M(r||null),q(r||null);const[n,l]=await Promise.all([Ia(),Ma()]);if(x(n.data),N(l.data),s.categories&&Array.isArray(s.categories)){const e=s.categories.map(e=>e.id);b(e)}else b([]);if(s.tags&&Array.isArray(s.tags)){const e=s.tags.map(e=>e.id);_(e)}else _([])}catch(s){ks({title:"Error",description:s.message||"Failed to load article data",variant:"destructive"})}})()},[a]),e.useEffect(()=>{g(h.filter(e=>e.name.toLowerCase().includes(f.toLowerCase())))},[f,h]),e.useEffect(()=>{C(y.filter(e=>e.name.toLowerCase().includes(k.toLowerCase())))},[k,y]);const H=async()=>{const e=A.trim();if(!e)return;let s=y.find(s=>s.name.toLowerCase()===e.toLowerCase());if(!s)try{const a=await Pa({name:e});s=a.data,N(e=>[...e,s])}catch(a){return void ks({title:"Error",description:a.message||"Failed to create tag",variant:"destructive"})}E.includes(s.id)||_([...E,s.id]),z("")},K=e=>_(E.filter(s=>s!==e)),W=async()=>{const e=R.trim();if(!e)return;let s=h.find(s=>s.name.toLowerCase()===e.toLowerCase());if(!s)try{const a=await Fa({name:e});s=a.data,x(e=>[...e,s])}catch(a){return void ks({title:"Error",description:a.message||"Failed to create category",variant:"destructive"})}j.includes(s.id)||b([...j,s.id]),I("")},J=e=>b(j.filter(s=>s!==e)),Q=async e=>{try{O(s=>({...s,[e]:!0}));let s="";switch(e){case"title":if(s=m.filter(e=>"text"===e.type).map(e=>e.content).join("\n\n"),!s.trim())return void ks({title:"Error",description:"Please add some text content first to generate a title",variant:"destructive"});break;case"excerpt":const e=m.filter(e=>"text"===e.type).map(e=>e.content).join("\n\n");s=`${r}\n\n${e}`;break;case"content":s=r}const a=await ps(s,e);if(a.error)throw new Error(a.error);if("title"===e)i(a.title||"");else if("excerpt"===e)o(a.excerpt||"");else if("content"===e)if(V)V(a.content||"");else{const e={id:Math.random().toString(36).substr(2,9),type:"text",content:a.content||"",order:m.length};u(s=>[...s,e])}}catch(s){ks({title:"Error",description:s.message||"Failed to generate suggestion",variant:"destructive"})}finally{O(s=>({...s,[e]:!1}))}},X=async e=>{if(!r.trim())return void ks({title:"Validation Error",description:"Title is required",variant:"destructive"});if(m.some(e=>"text"===e.type&&""!==e.content.trim()))if(0!==j.length){L(!0);try{const i=m.map(e=>"text"===e.type?e.content||"":"image"===e.type?`[IMAGE: ${e.imageUrl}] ${e.imageAlt||""}`:"").filter(e=>e.trim()).join("\n\n");await va(a,{title:r,body:i,excerpt:l,status:e,categories:j,tags:E,image_url:F});try{const e=m.filter(e=>"image"===e.type).map((e,s)=>({url:e.imageUrl,type:"image",subtype:"content",alt_text:e.imageAlt||"",order:s}));e.length>0&&await za({post_id:Number(a),images:e}),F&&await Aa({post_id:Number(a),type:"image",url:F,alt_text:r})}catch(s){ks({title:"Warning",description:"Article saved but there was an issue with image processing. You may need to re-upload images.",variant:"destructive"})}ks({title:"Success",description:`Article has been ${"published"===e?"published":"saved as draft"} successfully.`}),t("/articles")}catch(i){ks({title:"Error",description:i.message||"Failed to save article",variant:"destructive"})}finally{L(!1)}}else ks({title:"Validation Error",description:"Please select at least one category",variant:"destructive"});else ks({title:"Validation Error",description:"Please add some text content to your article",variant:"destructive"})};return s.jsx(St,{children:s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Ha,{variant:"ghost",asChild:!0,children:s.jsxs("a",{href:"/articles",children:[s.jsx(Le,{className:"h-4 w-4 mr-2"}),"Back to Articles"]})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Article"}),s.jsxs("p",{className:"text-gray-600 mt-1",children:["Currently ",P," • ID: ",a]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ha,{variant:"outline",onClick:()=>X("draft"),disabled:D,children:[s.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Save Draft"]}),s.jsxs(Ha,{onClick:()=>X("published"),disabled:D,children:[s.jsx(se,{className:"h-4 w-4 mr-2"}),"published"===P?"Update":"Publish"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2 space-y-6",children:s.jsxs(Et,{children:[s.jsx(_t,{children:s.jsx(At,{children:"Article Content"})}),s.jsxs(Rt,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"title",children:"Title *"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(Ka,{id:"title",value:r,onChange:e=>i(e.target.value),placeholder:"Enter article title or generate from content...",className:"text-lg"}),s.jsx(Ha,{type:"button",variant:"ghost",size:"icon",onClick:()=>Q("title"),disabled:U.title,title:"Generate title from your content (add content first)",children:s.jsx(Be,{className:"h-5 w-5"})})]})]}),s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"excerpt",children:"Excerpt"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(Vt,{id:"excerpt",value:l,onChange:e=>o(e.target.value),placeholder:"Brief description of the article (150-200 characters). Generate with AI after adding a title...",rows:3}),s.jsx(Ha,{type:"button",variant:"ghost",size:"icon",onClick:()=>Q("excerpt"),disabled:U.excerpt,title:"Generate excerpt from your title",children:s.jsx(Be,{className:"h-5 w-5"})})]})]}),s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"content",children:"Content"}),s.jsxs("div",{className:"flex gap-2 items-start",children:[s.jsx("div",{className:"flex-1",children:s.jsx(Xt,{value:m,onChange:u,onInsertAIContent:G,placeholder:"Write your article content with text and image blocks..."})}),s.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Be,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"AI Writing Assistant Tips:"}),s.jsxs("ul",{className:"space-y-1 text-xs",children:[s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Title:"})," Write content first, then generate a title from it"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Excerpt:"})," Add a title first, then generate an excerpt"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Content:"})," Add a title first, then generate article content"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Blocks:"})," Mix text and images for better storytelling"]})]})]})]})}),s.jsx(Ha,{type:"button",variant:"ghost",size:"icon",onClick:()=>Q("content"),disabled:U.content,title:"Generate content from your title",children:s.jsx(Be,{className:"h-5 w-5"})})]})]})]})]})}),s.jsx("div",{className:"space-y-6",children:s.jsxs(Et,{children:[s.jsx(_t,{children:s.jsx(At,{children:"Article Settings"})}),s.jsxs(Rt,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"category",children:"Categories *"}),s.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Select at least one category for your article"}),s.jsx(Ka,{value:f,onChange:e=>v(e.target.value),placeholder:"Search categories...",className:"mb-2"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:j.map(e=>{const a=h.find(s=>s.id===e);return a?s.jsxs(Ut,{variant:"secondary",className:"gap-1",children:[a.name,s.jsx("button",{onClick:()=>J(e),className:"ml-1 hover:text-red-500","aria-label":`Remove ${a.name} category`,children:s.jsx(n,{className:"h-3 w-3"})})]},e):null})}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx(Ka,{value:R,onChange:e=>I(e.target.value),placeholder:"Add new category...",onKeyPress:e=>"Enter"===e.key&&W()}),s.jsx(Ha,{onClick:W,type:"button",variant:"outline",children:"Add"})]}),s.jsxs("div",{className:"max-h-32 overflow-y-auto border rounded p-2 "+(0===j.length?"border-red-300 bg-red-50":""),children:[0===j.length&&s.jsx("p",{className:"text-sm text-red-600 mb-2",children:"Please select at least one category"}),p.map(e=>s.jsxs("div",{className:"flex items-center gap-2 py-1",children:[s.jsx("input",{type:"checkbox",checked:j.includes(e.id),onChange:()=>{j.includes(e.id)?J(e.id):b([...j,e.id])},id:`cat-${e.id}`}),s.jsx("label",{htmlFor:`cat-${e.id}`,children:e.name})]},e.id))]})]}),s.jsxs("div",{children:[s.jsx(Tt,{children:"Tags"}),s.jsx(Ka,{value:k,onChange:e=>S(e.target.value),placeholder:"Search tags...",className:"mb-2"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:E.map(e=>{const a=y.find(s=>s.id===e);return a?s.jsxs(Ut,{variant:"secondary",className:"gap-1",children:[a.name,s.jsx("button",{onClick:()=>K(e),className:"ml-1 hover:text-red-500","aria-label":`Remove ${a.name} tag`,children:s.jsx(n,{className:"h-3 w-3"})})]},e):null})}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx(Ka,{value:A,onChange:e=>z(e.target.value),placeholder:"Add new tag...",onKeyPress:e=>"Enter"===e.key&&H()}),s.jsx(Ha,{onClick:H,type:"button",variant:"outline",children:"Add"})]}),s.jsx("div",{className:"max-h-32 overflow-y-auto border rounded p-2",children:w.map(e=>s.jsxs("div",{className:"flex items-center gap-2 py-1",children:[s.jsx("input",{type:"checkbox",checked:E.includes(e.id),onChange:()=>{E.includes(e.id)?K(e.id):_([...E,e.id])},id:`tag-${e.id}`}),s.jsx("label",{htmlFor:`tag-${e.id}`,children:e.name})]},e.id))})]}),s.jsxs("div",{children:[s.jsx(Tt,{children:"Featured Image"}),$?s.jsxs("div",{className:"mt-2 relative",children:[s.jsx("img",{src:$,alt:"Featured",className:"w-full h-40 object-cover rounded-lg"}),s.jsx(Ha,{variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:()=>{T(null),M(null)},"aria-label":"Remove image",children:s.jsx(n,{className:"h-4 w-4"})})]}):s.jsxs("div",{className:"mt-2",children:[s.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed rounded-lg bg-gray-50",children:[s.jsx(Ae,{className:"h-8 w-8 text-gray-400"}),s.jsx("span",{className:"mt-2 text-sm text-gray-500 font-medium",children:"No image attached"}),s.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Click below to upload an image"})]}),s.jsxs(Tt,{htmlFor:"image-upload",className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed rounded-lg cursor-pointer hover:bg-gray-50 mt-2",children:[s.jsx(Ae,{className:"h-8 w-8 text-gray-400"}),s.jsx("span",{className:"mt-2 text-sm text-gray-500",children:"Click to upload image"}),s.jsx(Ka,{id:"image-upload",type:"file",className:"hidden",accept:"image/*",onChange:async e=>{var s;const a=null==(s=e.target.files)?void 0:s[0];if(a)try{Y&&(await Ra(Y),await fs(Y));const e=await gs(a);T(e),M(URL.createObjectURL(a)),q(e),ks({title:"Success",description:"Image uploaded successfully"})}catch(t){M(null),ks({title:"Error",description:t.message||"Failed to upload image",variant:"destructive"})}}})]})]})]})]})]})})]})]})})},sr=C,ar=Ue,tr=j,rr=e.forwardRef(({className:e,...a},t)=>s.jsx(v,{ref:t,className:zs("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));rr.displayName=v.displayName;const ir=e.forwardRef(({className:e,children:a,...t},r)=>s.jsxs(tr,{children:[s.jsx(rr,{}),s.jsxs(b,{ref:r,className:zs("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[a,s.jsxs(y,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(n,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ir.displayName=b.displayName;const nr=({className:e,...a})=>s.jsx("div",{className:zs("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});nr.displayName="DialogHeader";const lr=e.forwardRef(({className:e,...a},t)=>s.jsx(N,{ref:t,className:zs("text-lg font-semibold leading-none tracking-tight",e),...a}));lr.displayName=N.displayName;const or=e.forwardRef(({className:e,...a},t)=>s.jsx(w,{ref:t,className:zs("text-sm text-muted-foreground",e),...a}));or.displayName=w.displayName;const dr=["bg-blue-500","bg-green-500","bg-orange-500","bg-red-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-yellow-500"],cr=()=>{const[a,t]=e.useState([]),[r,i]=e.useState([]),[n,l]=e.useState(!0),[o,d]=e.useState(!1),[c,m]=e.useState(!1),[u,h]=e.useState(null),[x,p]=e.useState(""),[g,f]=e.useState("name-asc"),[v,j]=e.useState("all"),[b,y]=e.useState({name:"",description:"",color:dr[0]});e.useEffect(()=>{w()},[]),e.useEffect(()=>{N()},[a,x,g,v]);const N=()=>{let e=[...a];x.trim()&&(e=e.filter(e=>e.name.toLowerCase().includes(x.toLowerCase())||e.description&&e.description.toLowerCase().includes(x.toLowerCase()))),"all"!==v&&(e=e.filter(e=>{const s=(e.posts_count||0)>0;return"with-posts"===v?s:!s})),e.sort((e,s)=>{switch(g){case"name-asc":return e.name.localeCompare(s.name);case"name-desc":return s.name.localeCompare(e.name);case"usage-high":return(s.posts_count||0)-(e.posts_count||0);case"usage-low":return(e.posts_count||0)-(s.posts_count||0);case"date-new":return new Date(s.created_at).getTime()-new Date(e.created_at).getTime();case"date-old":return new Date(e.created_at).getTime()-new Date(s.created_at).getTime();default:return 0}}),i(e)},w=async()=>{try{l(!0);const e=(await Ia()).data.map((e,s)=>({...e,color:dr[s%dr.length]}));t(e)}catch(e){ks({title:"Error",description:"Failed to fetch categories",variant:"destructive"})}finally{l(!1)}},C=async e=>{var s,a;if(e.preventDefault(),b.name.trim())try{d(!0),u?(await Ta(u.id.toString(),{name:b.name,description:b.description||null}),ks({title:"Success",description:`Category "${b.name}" has been updated.`}),h(null)):(await Fa({name:b.name,description:b.description||null}),ks({title:"Success",description:`Category "${b.name}" has been created.`}),m(!1)),await w(),y({name:"",description:"",color:dr[0]})}catch(t){ks({title:"Error",description:(null==(a=null==(s=t.response)?void 0:s.data)?void 0:a.message)||"Failed to save category",variant:"destructive"})}finally{d(!1)}else ks({title:"Validation Error",description:"Category name is required",variant:"destructive"})},k=()=>s.jsxs("form",{onSubmit:C,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"name",children:"Category Name *"}),s.jsx(Ka,{id:"name",value:b.name,onChange:e=>y({...b,name:e.target.value}),placeholder:"Enter category name..."})]}),s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"description",children:"Description"}),s.jsx(Ka,{id:"description",value:b.description,onChange:e=>y({...b,description:e.target.value}),placeholder:"Brief description..."})]}),s.jsxs("div",{children:[s.jsx(Tt,{children:"Color (UI only)"}),s.jsx("div",{className:"flex gap-2 mt-2",children:dr.map(e=>s.jsx("button",{type:"button","aria-label":`Select ${e.replace("bg-","").replace("-500","")} color`,className:`w-8 h-8 rounded-full ${e} ${b.color===e?"ring-2 ring-gray-400":""}`,onClick:()=>y({...b,color:e})},e))})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsxs(Ha,{type:"submit",disabled:o,children:[o&&s.jsx(le,{className:"h-4 w-4 mr-2 animate-spin"}),u?"Update Category":"Create Category"]}),s.jsx(Ha,{type:"button",variant:"outline",onClick:()=>{m(!1),h(null),y({name:"",description:"",color:dr[0]})},children:"Cancel"})]})]});return n?s.jsx(St,{children:s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsx(le,{className:"h-8 w-8 animate-spin text-gray-400"})})}):s.jsx(St,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Categories"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Organize your articles into categories"})]}),s.jsxs(sr,{open:c,onOpenChange:m,children:[s.jsx(ar,{asChild:!0,children:s.jsxs(Ha,{children:[s.jsx(A,{className:"h-4 w-4 mr-2"}),"New Category"]})}),s.jsxs(ir,{className:"bg-white",children:[s.jsxs(nr,{children:[s.jsx(lr,{children:"Create New Category"}),s.jsx(or,{children:"Add a new category to organize your articles."})]}),s.jsx(k,{})]})]})]}),s.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(Ka,{placeholder:"Search categories...",value:x,onChange:e=>p(e.target.value),className:"pl-10"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Oe,{className:"h-4 w-4 text-gray-400"}),s.jsxs(Gt,{value:g,onValueChange:e=>f(e),children:[s.jsx(qt,{className:"w-48",children:s.jsx(Yt,{placeholder:"Sort by..."})}),s.jsxs(Wt,{children:[s.jsx(Jt,{value:"name-asc",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ve,{className:"h-4 w-4"}),"Name (A-Z)"]})}),s.jsx(Jt,{value:"name-desc",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Name (Z-A)"]})}),s.jsx(Jt,{value:"usage-high",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Most Used"]})}),s.jsx(Jt,{value:"usage-low",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ve,{className:"h-4 w-4"}),"Least Used"]})}),s.jsx(Jt,{value:"date-new",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Newest First"]})}),s.jsx(Jt,{value:"date-old",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ve,{className:"h-4 w-4"}),"Oldest First"]})})]})]})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(Gt,{value:v,onValueChange:e=>j(e),children:[s.jsx(qt,{className:"w-40",children:s.jsx(Yt,{placeholder:"Filter by usage..."})}),s.jsxs(Wt,{children:[s.jsx(Jt,{value:"all",children:"All Categories"}),s.jsx(Jt,{value:"with-posts",children:"With Posts"}),s.jsx(Jt,{value:"empty",children:"Empty Categories"})]})]})}),s.jsxs("div",{className:"text-sm text-gray-500",children:[r.length," of ",a.length," categories"]}),(x||"name-asc"!==g||"all"!==v)&&s.jsx(Ha,{variant:"outline",size:"sm",onClick:()=>{p(""),f("name-asc"),j("all")},children:"Clear Filters"})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(e=>s.jsxs(Et,{children:[s.jsx(_t,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-4 h-4 rounded-full ${e.color}`}),s.jsxs("div",{children:[s.jsx(At,{className:"text-lg",children:e.name}),s.jsxs(Ut,{variant:"secondary",className:"mt-1",children:[e.posts_count||0," articles"]})]})]}),s.jsxs(gt,{children:[s.jsx(ft,{asChild:!0,children:s.jsx(Ha,{variant:"ghost",size:"sm",children:s.jsx(de,{className:"h-4 w-4"})})}),s.jsxs(vt,{align:"end",className:"bg-white",children:[s.jsxs(jt,{onClick:()=>(e=>{h(e),y({name:e.name,description:e.description||"",color:e.color||dr[0]})})(e),children:[s.jsx(ce,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsxs(jt,{onClick:()=>(async e=>{var s,a;if(e.posts_count&&e.posts_count>0)ks({title:"Cannot delete category",description:`"${e.name}" has ${e.posts_count} articles. Move or delete articles first.`,variant:"destructive"});else try{await $a(e.id.toString()),await w(),ks({title:"Success",description:`Category "${e.name}" has been deleted.`})}catch(t){ks({title:"Error",description:(null==(a=null==(s=t.response)?void 0:s.data)?void 0:a.message)||"Failed to delete category",variant:"destructive"})}})(e),className:"text-red-600",disabled:!!e.posts_count&&e.posts_count>0,children:[s.jsx(ue,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})}),s.jsxs(Rt,{children:[s.jsx("p",{className:"text-gray-600 text-sm",children:e.description}),s.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Slug: ",e.slug]})]})]},e.id))}),u&&s.jsx(sr,{open:!!u,onOpenChange:()=>h(null),children:s.jsxs(ir,{className:"bg-white",children:[s.jsxs(nr,{children:[s.jsx(lr,{children:"Edit Category"}),s.jsx(or,{children:"Update the category information."})]}),s.jsx(k,{})]})}),0===r.length&&!n&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:0===a.length?"No categories yet":"No categories found"}),s.jsx("p",{className:"text-gray-600 mb-4",children:0===a.length?"Create your first category to organize your articles":"Try adjusting your search or filter criteria"}),0===a.length?s.jsxs(Ha,{onClick:()=>m(!0),children:[s.jsx(A,{className:"h-4 w-4 mr-2"}),"Create Category"]}):s.jsx(Ha,{variant:"outline",onClick:()=>{p(""),f("name-asc"),j("all")},children:"Clear Filters"})]})]})})},mr=()=>{const{user:a}=Ya(),t=Ye(),[r,i]=e.useState(""),[n,l]=e.useState("all"),[o,d]=e.useState("all"),[c,m]=e.useState(!1),[u,h]=e.useState(null),[x,p]=e.useState({fname:"",lname:"",email:"",password:"",password_confirmation:"",role:"author",number:""}),{data:g=[],isLoading:f,error:v}=ee({queryKey:["users"],queryFn:async()=>(await Ba()).data}),j=qe({mutationFn:e=>Da(e),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]}),m(!1),p({fname:"",lname:"",email:"",password:"",password_confirmation:"",role:"author",number:""}),ks({title:"User created",description:"User has been created successfully."})},onError:e=>{var s,a;ks({title:"Error",description:(null==(a=null==(s=e.response)?void 0:s.data)?void 0:a.message)||"Failed to create user",variant:"destructive"})}}),b=qe({mutationFn:({id:e,data:s})=>La(e.toString(),s),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]}),h(null),p({fname:"",lname:"",email:"",password:"",password_confirmation:"",role:"author",number:""}),ks({title:"User updated",description:"User has been updated successfully."})},onError:e=>{var s,a;ks({title:"Error",description:(null==(a=null==(s=e.response)?void 0:s.data)?void 0:a.message)||"Failed to update user",variant:"destructive"})}}),y=qe({mutationFn:e=>Ua(e.toString()),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]}),ks({title:"User deleted",description:"User has been deleted successfully."})},onError:e=>{var s,a;ks({title:"Error",description:(null==(a=null==(s=e.response)?void 0:s.data)?void 0:a.message)||"Failed to delete user",variant:"destructive"})}}),N=g.filter(e=>{const s=e.name.toLowerCase().includes(r.toLowerCase())||e.email.toLowerCase().includes(r.toLowerCase()),a="all"===n||e.role===n,t="all"===o||e.status===o;return s&&a&&t}),w=e=>{if(e.preventDefault(),x.fname.trim()&&x.lname.trim()&&x.email.trim())if(u){const e={fname:x.fname,lname:x.lname,email:x.email,role:x.role,number:x.number};b.mutate({id:u.id,data:e})}else{if(!x.password||x.password!==x.password_confirmation)return void ks({title:"Validation Error",description:"Password and password confirmation must match",variant:"destructive"});j.mutate(x)}else ks({title:"Validation Error",description:"First name, last name, and email are required",variant:"destructive"})},C=e=>{switch(e){case"admin":return"bg-red-100 text-red-800";case"editor":return"bg-yellow-100 text-yellow-800";case"author":return"bg-green-100 text-green-800";case"viewer":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},k=()=>s.jsxs("form",{onSubmit:w,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"fname",children:"First Name *"}),s.jsx(Ka,{id:"fname",value:x.fname,onChange:e=>p({...x,fname:e.target.value}),placeholder:"Enter first name..."})]}),s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"lname",children:"Last Name *"}),s.jsx(Ka,{id:"lname",value:x.lname,onChange:e=>p({...x,lname:e.target.value}),placeholder:"Enter last name..."})]})]}),s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"email",children:"Email *"}),s.jsx(Ka,{id:"email",type:"email",value:x.email,onChange:e=>p({...x,email:e.target.value}),placeholder:"Enter email address..."})]}),s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"number",children:"Phone Number"}),s.jsx(Ka,{id:"number",value:x.number,onChange:e=>p({...x,number:e.target.value}),placeholder:"Enter phone number..."})]}),!u&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"password",children:"Password *"}),s.jsx(Ka,{id:"password",type:"password",value:x.password,onChange:e=>p({...x,password:e.target.value}),placeholder:"Enter password..."})]}),s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"password_confirmation",children:"Confirm Password *"}),s.jsx(Ka,{id:"password_confirmation",type:"password",value:x.password_confirmation,onChange:e=>p({...x,password_confirmation:e.target.value}),placeholder:"Confirm password..."})]})]}),s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"role",children:"Role"}),s.jsxs(Gt,{value:x.role,onValueChange:e=>p({...x,role:e}),children:[s.jsx(qt,{children:s.jsx(Yt,{})}),s.jsxs(Wt,{className:"bg-white",children:[s.jsx(Jt,{value:"viewer",children:"Viewer"}),s.jsx(Jt,{value:"author",children:"Author"}),s.jsx(Jt,{value:"editor",children:"Editor"}),s.jsx(Jt,{value:"admin",children:"Admin"})]})]})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(Ha,{type:"submit",disabled:j.isPending||b.isPending,children:u?"Update User":"Create User"}),s.jsx(Ha,{type:"button",variant:"outline",onClick:()=>{m(!1),h(null),p({fname:"",lname:"",email:"",password:"",password_confirmation:"",role:"author",number:""})},children:"Cancel"})]})]});return"admin"!==(null==a?void 0:a.role)?s.jsx(St,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(R,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-gray-600",children:"Only administrators can manage users."})]})}):f?s.jsx(St,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Users"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Loading users..."})]})}),s.jsx("div",{className:"grid gap-4",children:[...Array(5)].map((e,a)=>s.jsx(Et,{children:s.jsx(Rt,{className:"p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"h-12 w-12 bg-gray-200 rounded-full animate-pulse"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-1/3 mb-2"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded animate-pulse w-1/2"})]})]})})},a))})]})}):v?s.jsx(St,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(R,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Users"}),s.jsx("p",{className:"text-gray-600",children:"Failed to load users. Please try again later."})]})}):s.jsx(St,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Users"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage user accounts and permissions"})]}),s.jsxs(sr,{open:c,onOpenChange:m,children:[s.jsx(ar,{asChild:!0,children:s.jsxs(Ha,{children:[s.jsx(A,{className:"h-4 w-4 mr-2"}),"New User"]})}),s.jsxs(ir,{className:"bg-white",children:[s.jsxs(nr,{children:[s.jsx(lr,{children:"Create New User"}),s.jsx(or,{children:"Add a new user to the system."})]}),s.jsx(k,{})]})]})]}),s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(Ka,{placeholder:"Search users...",value:r,onChange:e=>i(e.target.value),className:"pl-9"})]}),s.jsxs("select",{title:"Filter by role",value:n,onChange:e=>l(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[s.jsx("option",{value:"all",children:"All Roles"}),s.jsx("option",{value:"admin",children:"Admin"}),s.jsx("option",{value:"editor",children:"Editor"}),s.jsx("option",{value:"author",children:"Author"}),s.jsx("option",{value:"viewer",children:"Viewer"})]}),s.jsxs("select",{title:"Filter by status",value:o,onChange:e=>d(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"inactive",children:"Inactive"})]})]}),s.jsx("div",{className:"grid gap-4",children:N.map(e=>s.jsx(Et,{children:s.jsx(Rt,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Nt,{className:"h-12 w-12",children:s.jsxs(Ct,{children:[e.fname.charAt(0),e.lname.charAt(0)]})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:e.name}),s.jsx(Ut,{className:C(e.role),children:e.role}),s.jsx(Ut,{variant:"active"===e.status?"default":"secondary",children:e.status})]}),s.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 mt-1",children:[s.jsxs("span",{children:[e.article_count," articles"]}),s.jsxs("span",{children:["Joined ",e.joined_at]}),s.jsxs("span",{children:["Last active ",e.last_active]})]})]})]}),s.jsxs(gt,{children:[s.jsx(ft,{asChild:!0,children:s.jsx(Ha,{variant:"ghost",size:"sm",children:s.jsx(de,{className:"h-4 w-4"})})}),s.jsxs(vt,{align:"end",className:"bg-white",children:[s.jsxs(jt,{onClick:()=>(e=>{h(e),p({fname:e.fname,lname:e.lname,email:e.email,role:e.role,number:e.number||"",password:"",password_confirmation:""})})(e),children:[s.jsx(ce,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsxs(jt,{onClick:()=>(e=>{e.id!==(null==a?void 0:a.id)?y.mutate(e.id):ks({title:"Cannot delete user",description:"You cannot delete your own account.",variant:"destructive"})})(e),className:"text-red-600",disabled:e.id===(null==a?void 0:a.id),children:[s.jsx(ue,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})})},e.id))}),u&&s.jsx(sr,{open:!!u,onOpenChange:()=>h(null),children:s.jsxs(ir,{className:"bg-white",children:[s.jsxs(nr,{children:[s.jsx(lr,{children:"Edit User"}),s.jsx(or,{children:"Update user information and permissions."})]}),s.jsx(k,{})]})}),0===N.length&&!f&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(R,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),s.jsx("p",{className:"text-gray-600",children:r?"Try adjusting your search terms":"Create your first user to get started"})]})]})})},ur=e.forwardRef(({className:e,...a},t)=>s.jsx(He,{className:zs("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...a,ref:t,children:s.jsx(Ke,{className:zs("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ur.displayName=He.displayName;const hr=()=>{var a,t;const{user:r,updateUser:i}=Ya(),[n,l]=e.useState(!1),[o,d]=e.useState({fname:(null==r?void 0:r.fname)||"",lname:(null==r?void 0:r.lname)||"",email:(null==r?void 0:r.email)||"",number:(null==r?void 0:r.number)||"",current_password:"",new_password:"",new_password_confirmation:""}),[c,m]=e.useState({emailArticles:!0,emailComments:!1,pushNotifications:!0,weeklyDigest:!0}),[u,h]=e.useState({siteName:"News Platform",siteDescription:"Your trusted source for news and information",contactEmail:"contact@newsplatform.com",allowRegistrations:!1,requireApproval:!0});return s.jsx(St,{children:s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your account and platform settings"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(Et,{children:[s.jsxs(_t,{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(We,{className:"h-5 w-5"}),s.jsx(At,{children:"Profile Settings"})]}),s.jsx(zt,{children:"Update your personal information and preferences"})]}),s.jsxs(Rt,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(Nt,{className:"h-20 w-20",children:[s.jsx(wt,{src:"",alt:null==r?void 0:r.name}),s.jsx(Ct,{className:"text-lg",children:(null==(t=null==(a=null==r?void 0:r.fname)?void 0:a[0])?void 0:t.toUpperCase())||"U"})]}),s.jsxs("div",{children:[s.jsx("input",{type:"file",accept:"image/*",onChange:e=>{var s;(null==(s=e.target.files)?void 0:s[0])&&ks({title:"Not implemented",description:"Avatar upload functionality will be added soon."})},className:"hidden",id:"avatar-upload"}),s.jsx(Ha,{variant:"outline",size:"sm",asChild:!0,children:s.jsxs("label",{htmlFor:"avatar-upload",className:"cursor-pointer",children:[s.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Change Avatar"]})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"fname",children:"First Name"}),s.jsx(Ka,{id:"fname",value:o.fname,onChange:e=>d({...o,fname:e.target.value})})]}),s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"lname",children:"Last Name"}),s.jsx(Ka,{id:"lname",value:o.lname,onChange:e=>d({...o,lname:e.target.value})})]})]}),s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"email",children:"Email"}),s.jsx(Ka,{id:"email",type:"email",value:o.email,onChange:e=>d({...o,email:e.target.value})})]}),s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"number",children:"Phone Number"}),s.jsx(Ka,{id:"number",value:o.number,onChange:e=>d({...o,number:e.target.value})})]}),s.jsxs("div",{className:"space-y-4 border-t pt-4",children:[s.jsx("h3",{className:"font-medium",children:"Change Password"}),s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"current_password",children:"Current Password"}),s.jsx(Ka,{id:"current_password",type:"password",value:o.current_password,onChange:e=>d({...o,current_password:e.target.value})})]}),s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"new_password",children:"New Password"}),s.jsx(Ka,{id:"new_password",type:"password",value:o.new_password,onChange:e=>d({...o,new_password:e.target.value})})]}),s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"new_password_confirmation",children:"Confirm New Password"}),s.jsx(Ka,{id:"new_password_confirmation",type:"password",value:o.new_password_confirmation,onChange:e=>d({...o,new_password_confirmation:e.target.value})})]})]}),s.jsxs(Ha,{onClick:async()=>{var e,s;try{l(!0);const e={};if(o.fname!==(null==r?void 0:r.fname)&&(e.fname=o.fname),o.lname!==(null==r?void 0:r.lname)&&(e.lname=o.lname),o.email!==(null==r?void 0:r.email)&&(e.email=o.email),o.number!==(null==r?void 0:r.number)&&(e.number=o.number),o.new_password&&(e.current_password=o.current_password,e.new_password=o.new_password,e.new_password_confirmation=o.new_password_confirmation),Object.keys(e).length>0){const s=await Oa(e);i(s.data.user),d(e=>({...e,current_password:"",new_password:"",new_password_confirmation:""})),ks({title:"Success",description:"Your profile has been updated successfully."})}}catch(a){ks({title:"Error",description:(null==(s=null==(e=a.response)?void 0:e.data)?void 0:s.message)||"Failed to update profile",variant:"destructive"})}finally{l(!1)}},disabled:n,children:[s.jsx(Pe,{className:"h-4 w-4 mr-2"}),n?"Saving...":"Save Profile"]})]})]}),s.jsxs(Et,{children:[s.jsxs(_t,{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Je,{className:"h-5 w-5"}),s.jsx(At,{children:"Notification Preferences"})]}),s.jsx(zt,{children:"Choose what notifications you want to receive"})]}),s.jsxs(Rt,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"email-articles",children:"Email for new articles"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Get notified when articles are published"})]}),s.jsx(ur,{id:"email-articles",checked:c.emailArticles,onCheckedChange:e=>m({...c,emailArticles:e})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"email-comments",children:"Email for comments"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Get notified about new comments"})]}),s.jsx(ur,{id:"email-comments",checked:c.emailComments,onCheckedChange:e=>m({...c,emailComments:e})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"push-notifications",children:"Push notifications"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Receive browser push notifications"})]}),s.jsx(ur,{id:"push-notifications",checked:c.pushNotifications,onCheckedChange:e=>m({...c,pushNotifications:e})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"weekly-digest",children:"Weekly digest"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Receive a weekly summary email"})]}),s.jsx(ur,{id:"weekly-digest",checked:c.weeklyDigest,onCheckedChange:e=>m({...c,weeklyDigest:e})})]}),s.jsxs(Ha,{onClick:()=>{ks({title:"Notification preferences updated",description:"Your notification settings have been saved."})},children:[s.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Save Preferences"]})]})]}),"admin"===(null==r?void 0:r.role)&&s.jsxs(Et,{children:[s.jsxs(_t,{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qe,{className:"h-5 w-5"}),s.jsx(At,{children:"Site Settings"})]}),s.jsx(zt,{children:"Configure global site settings"})]}),s.jsxs(Rt,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"site-name",children:"Site Name"}),s.jsx(Ka,{id:"site-name",value:u.siteName,onChange:e=>h({...u,siteName:e.target.value})})]}),s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"site-description",children:"Site Description"}),s.jsx(Vt,{id:"site-description",value:u.siteDescription,onChange:e=>h({...u,siteDescription:e.target.value}),rows:2})]}),s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"contact-email",children:"Contact Email"}),s.jsx(Ka,{id:"contact-email",type:"email",value:u.contactEmail,onChange:e=>h({...u,contactEmail:e.target.value})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"allow-registrations",children:"Allow new registrations"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Allow new users to register"})]}),s.jsx(ur,{id:"allow-registrations",checked:u.allowRegistrations,onCheckedChange:e=>h({...u,allowRegistrations:e})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"require-approval",children:"Require admin approval"}),s.jsx("p",{className:"text-sm text-gray-600",children:"New users need admin approval"})]}),s.jsx(ur,{id:"require-approval",checked:u.requireApproval,onCheckedChange:e=>h({...u,requireApproval:e})})]}),s.jsxs(Ha,{onClick:()=>{ks({title:"Site settings updated",description:"Site configuration has been saved successfully."})},children:[s.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Save Site Settings"]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Et,{children:[s.jsx(_t,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xe,{className:"h-5 w-5"}),s.jsx(At,{children:"Account Info"})]})}),s.jsxs(Rt,{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(Tt,{className:"text-sm font-medium",children:"Role"}),s.jsx("p",{className:"text-sm text-gray-600 capitalize",children:null==r?void 0:r.role})]}),s.jsxs("div",{children:[s.jsx(Tt,{className:"text-sm font-medium",children:"Member since"}),s.jsx("p",{className:"text-sm text-gray-600",children:(null==r?void 0:r.created_at)?new Date(r.created_at).toLocaleDateString():"N/A"})]}),s.jsxs("div",{children:[s.jsx(Tt,{className:"text-sm font-medium",children:"Articles published"}),s.jsxs("p",{className:"text-sm text-gray-600",children:[(null==r?void 0:r.article_count)||0," articles"]})]})]})]}),s.jsxs(Et,{children:[s.jsx(_t,{children:s.jsx(At,{children:"Quick Actions"})}),s.jsxs(Rt,{className:"space-y-3",children:[s.jsx(Ha,{variant:"outline",className:"w-full justify-start",asChild:!0,children:s.jsxs("a",{href:"/articles/create",children:[s.jsx(A,{className:"h-4 w-4 mr-2"}),"Create New Article"]})}),s.jsx(Ha,{variant:"outline",className:"w-full justify-start",asChild:!0,children:s.jsxs("a",{href:"/articles",children:[s.jsx(_,{className:"h-4 w-4 mr-2"}),"View My Articles"]})}),("editor"===(null==r?void 0:r.role)||"admin"===(null==r?void 0:r.role))&&s.jsx(Ha,{variant:"outline",className:"w-full justify-start",asChild:!0,children:s.jsxs("a",{href:"/categories",children:[s.jsx(z,{className:"h-4 w-4 mr-2"}),"Manage Categories"]})})]})]})]})]})]})})},xr=()=>{const[a,t]=e.useState({use_manual_news:!1,manual_news:[],use_newsapi:!0,use_newsdata:!0}),[r,i]=e.useState(!0),[n,l]=e.useState(!1),[o,d]=e.useState(""),{toast:c}=Ss();e.useEffect(()=>{m()},[]);const m=async()=>{try{i(!0);const e=await ua.get("/breaking-news/settings");t(e.data.data)}catch(e){c({title:"Error",description:"Failed to load breaking news settings",variant:"destructive"})}finally{i(!1)}},u=()=>{o.trim()&&(t(e=>({...e,manual_news:[...e.manual_news,o.trim()]})),d(""))};return r?s.jsx(St,{children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})})}):s.jsx(St,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Breaking News Management"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Configure breaking news sources and manage manual headlines"})]}),s.jsxs(Ha,{onClick:m,variant:"outline",size:"sm",children:[s.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(Et,{children:[s.jsx(_t,{children:s.jsxs(At,{className:"flex items-center gap-2",children:["Manual News Mode",s.jsx(Ut,{variant:a.use_manual_news?"default":"secondary",children:a.use_manual_news?"Active":"Inactive"})]})}),s.jsxs(Rt,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ur,{id:"manual-mode",checked:a.use_manual_news,onCheckedChange:e=>t(s=>({...s,use_manual_news:e}))}),s.jsx(Tt,{htmlFor:"manual-mode",children:"Use manual breaking news headlines"})]}),a.use_manual_news&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(Wa,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Tt,{children:"Add New Headline"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ka,{value:o,onChange:e=>d(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),u())},placeholder:"Enter breaking news headline...",className:"flex-1"}),s.jsx(Ha,{onClick:u,size:"sm",children:s.jsx(A,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Tt,{children:["Manual Headlines (",a.manual_news.length,")"]}),s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:0===a.manual_news.length?s.jsx("p",{className:"text-sm text-gray-500 italic",children:"No manual headlines added yet"}):a.manual_news.map((e,a)=>s.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded",children:[s.jsx(Ka,{value:e,onChange:e=>((e,s)=>{t(a=>({...a,manual_news:a.manual_news.map((a,t)=>t===e?s:a)}))})(a,e.target.value),className:"flex-1"}),s.jsx(Ha,{onClick:()=>(e=>{t(s=>({...s,manual_news:s.manual_news.filter((s,a)=>a!==e)}))})(a),variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",children:s.jsx(Te,{className:"h-4 w-4"})})]},a))})]})]})]})]}),s.jsxs(Et,{children:[s.jsx(_t,{children:s.jsx(At,{children:"External API Settings"})}),s.jsxs(Rt,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"newsapi",children:"NewsAPI"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Fetch headlines from NewsAPI"})]}),s.jsx(ur,{id:"newsapi",checked:a.use_newsapi,onCheckedChange:e=>t(s=>({...s,use_newsapi:e}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Tt,{htmlFor:"newsdata",children:"NewsData.io"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Fetch headlines from NewsData.io (fallback)"})]}),s.jsx(ur,{id:"newsdata",checked:a.use_newsdata,onCheckedChange:e=>t(s=>({...s,use_newsdata:e}))})]})]}),s.jsx(Wa,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Tt,{children:"Priority Order"}),s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[a.use_manual_news&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ut,{variant:"outline",children:"1"}),s.jsx("span",{children:"Manual Headlines"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ut,{variant:"outline",children:a.use_manual_news?"2":"1"}),s.jsx("span",{children:"Cached News (1 hour)"})]}),a.use_newsapi&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ut,{variant:"outline",children:a.use_manual_news?"3":"2"}),s.jsx("span",{children:"NewsAPI"})]}),a.use_newsdata&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ut,{variant:"outline",children:a.use_manual_news?a.use_newsapi?"4":"3":a.use_newsapi?"3":"2"}),s.jsx("span",{children:"NewsData.io"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ut,{variant:"outline",children:a.use_manual_news?a.use_newsapi&&a.use_newsdata?"5":"4":a.use_newsapi&&a.use_newsdata?"4":"3"}),s.jsx("span",{children:"Fallback Headlines"})]})]})]})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(Ha,{onClick:async()=>{try{l(!0),await ua.post("/breaking-news/settings",a),c({title:"Success",description:"Breaking news settings updated successfully"})}catch(e){c({title:"Error",description:"Failed to save breaking news settings",variant:"destructive"})}finally{l(!1)}},disabled:n,className:"min-w-[120px]",children:n?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Save Settings"]})})})]})})},pr=()=>{const{postId:a}=De(),t=ie(),[r,i]=e.useState([]),[n,l]=e.useState(null),[o,d]=e.useState(!0),[c,m]=e.useState("all");e.useEffect(()=>{a&&u()},[a]);const u=async()=>{d(!0);try{const[e,s]=await Promise.all([ga(a),_a(a)]);l(e.data),i(s.data)}catch(e){ks({title:"Error",description:"Failed to load comments",variant:"destructive"})}finally{d(!1)}},h=async(e,s)=>{try{switch(s){case"approve":await Sa(e.toString());break;case"spam":await Ea(e.toString());break;case"delete":await ka(e.toString())}await u(),ks({title:"Success",description:`Comment ${"delete"===s?"deleted":"approve"===s?"approved":"marked as spam"} successfully`})}catch(a){ks({title:"Error",description:"Failed to update comment",variant:"destructive"})}},x=e=>{switch(e){case"approved":return s.jsx(Ut,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:"Approved"});case"pending":return s.jsx(Ut,{className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-100",children:"Pending"});case"spam":return s.jsx(Ut,{className:"bg-red-100 text-red-800 hover:bg-red-100",children:"Spam"});default:return s.jsx(Ut,{variant:"secondary",children:e})}},p=r.filter(e=>"all"===c||e.status===c),g=e=>e.user?`${e.user.fname} ${e.user.lname}`:"Anonymous",f=({comment:e,level:a=0})=>{return s.jsxs("div",{className:"border-l-2 border-gray-200 pl-4 mb-4 "+(a>0?"ml-4":""),children:[s.jsx(Et,{className:"mb-4",children:s.jsx(Rt,{className:"p-4",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:s.jsx(We,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-sm",children:g(e)}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ae,{className:"w-3 h-3 text-gray-500"}),s.jsx("span",{className:"text-xs text-gray-500",children:(t=e.created_at,new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))}),x(e.status)]})]})]}),s.jsx("p",{className:"text-gray-700 text-sm leading-relaxed mb-3",children:e.body}),s.jsxs("div",{className:"flex space-x-2",children:["pending"===e.status&&s.jsxs(s.Fragment,{children:[s.jsxs(Ha,{size:"sm",onClick:()=>h(e.id,"approve"),className:"bg-green-600 hover:bg-green-700 text-white",children:[s.jsx(ss,{className:"w-3 h-3 mr-1"}),"Approve"]}),s.jsxs(Ha,{size:"sm",variant:"outline",onClick:()=>h(e.id,"spam"),className:"border-red-300 text-red-600 hover:bg-red-50",children:[s.jsx(as,{className:"w-3 h-3 mr-1"}),"Mark Spam"]})]}),"spam"===e.status&&s.jsxs(Ha,{size:"sm",onClick:()=>h(e.id,"approve"),className:"bg-green-600 hover:bg-green-700 text-white",children:[s.jsx(ss,{className:"w-3 h-3 mr-1"}),"Approve"]}),s.jsxs(Ha,{size:"sm",variant:"outline",onClick:()=>h(e.id,"delete"),className:"border-red-300 text-red-600 hover:bg-red-50",children:[s.jsx(Te,{className:"w-3 h-3 mr-1"}),"Delete"]})]})]})})})}),e.replies&&e.replies.length>0&&s.jsx("div",{className:"ml-4",children:e.replies.map(e=>s.jsx(f,{comment:e,level:a+1},e.id))})]});var t};return o?s.jsx(St,{children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):s.jsx(St,{children:s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(Ha,{variant:"outline",onClick:()=>t("/articles"),className:"flex items-center",children:[s.jsx(Le,{className:"w-4 h-4 mr-2"}),"Back to Articles"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Comments"}),n&&s.jsxs("p",{className:"text-gray-600 text-sm",children:["For: ",s.jsx("span",{className:"font-medium",children:n.title})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(es,{className:"w-5 h-5 text-blue-600"}),s.jsxs("span",{className:"text-sm text-gray-600",children:[r.length," total comments"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsx(Et,{children:s.jsx(Rt,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(es,{className:"w-5 h-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),s.jsx("p",{className:"text-xl font-bold",children:r.length})]})]})})}),s.jsx(Et,{children:s.jsx(Rt,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ss,{className:"w-5 h-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Approved"}),s.jsx("p",{className:"text-xl font-bold",children:r.filter(e=>"approved"===e.status).length})]})]})})}),s.jsx(Et,{children:s.jsx(Rt,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(as,{className:"w-5 h-5 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),s.jsx("p",{className:"text-xl font-bold",children:r.filter(e=>"pending"===e.status).length})]})]})})}),s.jsx(Et,{children:s.jsx(Rt,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ts,{className:"w-5 h-5 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Spam"}),s.jsx("p",{className:"text-xl font-bold",children:r.filter(e=>"spam"===e.status).length})]})]})})})]}),s.jsx("div",{className:"mb-6",children:s.jsx(Et,{children:s.jsx(Rt,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Post Analytics"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"View detailed analytics and performance metrics for this article"})]}),s.jsx(Ha,{asChild:!0,children:s.jsxs("a",{href:`/articles/${a}/analytics`,children:[s.jsx(me,{className:"h-4 w-4 mr-2"}),"View Analytics"]})})]})})})}),s.jsxs("div",{className:"flex space-x-2 mb-6",children:[s.jsxs(Ha,{variant:"all"===c?"default":"outline",onClick:()=>m("all"),size:"sm",children:["All (",r.length,")"]}),s.jsxs(Ha,{variant:"pending"===c?"default":"outline",onClick:()=>m("pending"),size:"sm",children:["Pending (",r.filter(e=>"pending"===e.status).length,")"]}),s.jsxs(Ha,{variant:"approved"===c?"default":"outline",onClick:()=>m("approved"),size:"sm",children:["Approved (",r.filter(e=>"approved"===e.status).length,")"]}),s.jsxs(Ha,{variant:"spam"===c?"default":"outline",onClick:()=>m("spam"),size:"sm",children:["Spam (",r.filter(e=>"spam"===e.status).length,")"]})]}),s.jsx(Wa,{className:"mb-6"}),s.jsx("div",{className:"space-y-4",children:0===p.length?s.jsx(Et,{children:s.jsxs(Rt,{className:"p-8 text-center",children:[s.jsx(es,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"all"===c?"No comments yet for this article.":`No ${c} comments found.`})]})}):p.map(e=>s.jsx(f,{comment:e},e.id))})]})})},gr=()=>{const{postId:a}=De(),[t,r]=e.useState(null),[i,n]=e.useState(null),[l,o]=e.useState(null),[d,c]=e.useState([]),[m,u]=e.useState(!0),[h,x]=e.useState(!1);e.useEffect(()=>{a&&p()},[a]);const p=async()=>{u(!0);try{const[e,s,t,i]=await Promise.all([ga(a),Na(a),Ca(a),wa(10)]);r(e.data),n(s.data),o(t.data),c(i.data)}catch(e){ks({title:"Error",description:"Failed to load analytics data",variant:"destructive"})}finally{u(!1)}},g=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return m?s.jsx(St,{children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):s.jsx(St,{children:s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(Ha,{variant:"outline",onClick:()=>window.history.back(),className:"flex items-center",children:[s.jsx(Le,{className:"w-4 h-4 mr-2"}),"Back"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics"}),t&&s.jsxs("p",{className:"text-gray-600 text-sm",children:["For: ",s.jsx("span",{className:"font-medium",children:t.title})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(me,{className:"w-5 h-5 text-blue-600"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Post Analytics"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsx(Et,{children:s.jsx(Rt,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(se,{className:"w-5 h-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Views"}),s.jsx("p",{className:"text-xl font-bold",children:(null==i?void 0:i.total_views)||0})]})]})})}),s.jsx(Et,{children:s.jsx(Rt,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(R,{className:"w-5 h-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Unique Users"}),s.jsx("p",{className:"text-xl font-bold",children:(null==i?void 0:i.unique_users)||0})]})]})})}),s.jsx(Et,{children:s.jsx(Rt,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(rs,{className:"w-5 h-5 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Engagement Rate"}),s.jsxs("p",{className:"text-xl font-bold",children:[(null==i?void 0:i.total_views)&&(null==i?void 0:i.unique_users)?Math.round(i.unique_users/i.total_views*100):0,"%"]})]})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs(Et,{children:[s.jsx(_t,{children:s.jsxs(At,{className:"flex items-center",children:[s.jsx(is,{className:"w-5 h-5 mr-2"}),"Views Over Time"]})}),s.jsx(Rt,{children:l&&l.daily_views.length>0?s.jsx("div",{className:"space-y-3",children:l.daily_views.slice(-7).map((e,a)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:g(e.date)}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(se,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"font-semibold",children:e.views})]})]},a))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(is,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No view data available"})]})})]}),s.jsxs(Et,{children:[s.jsx(_t,{children:s.jsxs(At,{className:"flex items-center",children:[s.jsx(rs,{className:"w-5 h-5 mr-2"}),"Top Posts"]})}),s.jsx(Rt,{children:d.length>0?s.jsx("div",{className:"space-y-3",children:d.slice(0,5).map((e,a)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ut,{variant:"secondary",children:a+1}),s.jsx("div",{className:"max-w-xs",children:s.jsx("p",{className:"text-sm font-medium truncate",children:e.title})})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(se,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"font-semibold",children:e.views})]})]},e.post_id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(rs,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No top posts data available"})]})})]})]}),s.jsx("div",{className:"mt-8",children:s.jsx(Et,{children:s.jsx(Rt,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Comments Management"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"View and manage comments for this article"})]}),s.jsx(Ha,{asChild:!0,children:s.jsxs("a",{href:`/articles/${a}/comments`,children:[s.jsx(_,{className:"h-4 w-4 mr-2"}),"View Comments"]})})]})})})}),s.jsx("div",{className:"mt-8",children:s.jsxs(Et,{children:[s.jsx(_t,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(At,{className:"flex items-center",children:[s.jsx(_,{className:"w-5 h-5 mr-2"}),"Post Information"]}),s.jsx(Ha,{variant:"outline",size:"sm",onClick:()=>x(!h),className:"flex items-center",children:h?s.jsxs(s.Fragment,{children:[s.jsx(fe,{className:"h-4 w-4 mr-1"}),"Minimize"]}):s.jsxs(s.Fragment,{children:[s.jsx(pe,{className:"h-4 w-4 mr-1"}),"Expand"]})})]})}),h&&s.jsxs(Rt,{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(_,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Title:"}),s.jsx("span",{className:"text-sm",children:null==t?void 0:t.title})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(te,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Slug:"}),s.jsx("span",{className:"text-sm font-mono bg-gray-100 px-2 py-1 rounded",children:null==t?void 0:t.slug})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ae,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Status:"}),s.jsx(Ut,{variant:"published"===(null==t?void 0:t.status)?"default":"draft"===(null==t?void 0:t.status)?"secondary":"destructive",children:null==t?void 0:t.status})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(We,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Author:"}),s.jsx("span",{className:"text-sm",children:(null==t?void 0:t.user)?`${t.user.fname} ${t.user.lname}`:"Unknown"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(is,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Created:"}),s.jsx("span",{className:"text-sm",children:(null==t?void 0:t.created_at)?g(t.created_at):"N/A"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(is,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Published:"}),s.jsx("span",{className:"text-sm",children:(null==t?void 0:t.published_at)?g(t.published_at):"Not published"})]})]})]})]}),s.jsx(Wa,{}),(null==t?void 0:t.categories)&&t.categories.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg font-semibold mb-4 text-gray-800 flex items-center",children:[s.jsx(z,{className:"w-5 h-5 mr-2"}),"Categories"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:t.categories.map(e=>s.jsx(Ut,{variant:"outline",children:e.name},e.id))})]}),(null==t?void 0:t.tags)&&t.tags.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg font-semibold mb-4 text-gray-800 flex items-center",children:[s.jsx(te,{className:"w-5 h-5 mr-2"}),"Tags"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map(e=>s.jsx(Ut,{variant:"secondary",children:e.name},e.id))})]}),(null==t?void 0:t.media)&&t.media.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg font-semibold mb-4 text-gray-800 flex items-center",children:[s.jsx(Fe,{className:"w-5 h-5 mr-2"}),"Media Files"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.media.map(e=>s.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(Fe,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium",children:e.filename})]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Type: ",e.type]}),"image"===e.type&&s.jsx("img",{src:e.url,alt:e.filename,className:"w-full h-24 object-cover rounded mt-2"})]},e.id))})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Content Preview"}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-4 max-h-48 overflow-y-auto",children:s.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:(null==t?void 0:t.body)?t.body.length>500?`${t.body.substring(0,500)}...`:t.body:"No content available"})})]})]})]})})]})})},fr=()=>{const[a,t]=e.useState([]),[r,i]=e.useState("");return s.jsx(St,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Block Editor Demo"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Test the block-based content editor with drag-and-drop functionality"})]}),s.jsx(Ha,{onClick:()=>{t([{id:"1",type:"text",content:"This is a sample article with block-based content. You can write your text here and add images between paragraphs.",order:0},{id:"2",type:"text",content:"This is another paragraph. You can add as many text blocks as you need to create your article.",order:1}])},variant:"outline",children:"Add Sample Content"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(Et,{children:[s.jsx(_t,{children:s.jsx(At,{children:"Block Editor"})}),s.jsx(Rt,{children:s.jsx(Xt,{value:a,onChange:e=>{t(e);const s=e.map(e=>"text"===e.type?e.content:"image"===e.type?`[IMAGE: ${e.imageUrl}] ${e.imageAlt||""}`:"").filter(e=>e.trim()).join("\n\n");i(s)},placeholder:"Start writing your article with text and image blocks..."})})]}),s.jsxs(Et,{children:[s.jsx(_t,{children:s.jsx(At,{children:"Generated Content"})}),s.jsx(Rt,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Raw Output:"}),s.jsx("pre",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:r||"No content yet..."})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Block Structure:"}),s.jsx("div",{className:"space-y-2",children:a.map((e,a)=>s.jsxs("div",{className:"text-sm",children:[s.jsxs("span",{className:"font-medium",children:["Block ",a+1,":"]})," ",s.jsxs("span",{className:"text-gray-600",children:[e.type," -"," ","text"===e.type?e.content.substring(0,50)+"...":e.imageUrl]})]},e.id))})]})]})})]})]}),s.jsxs(Et,{children:[s.jsx(_t,{children:s.jsx(At,{children:"How to Use the Block Editor"})}),s.jsx(Rt,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Adding Blocks:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-600",children:[s.jsx("li",{children:'Click "Add Text" to add a new text block'}),s.jsx("li",{children:'Click "Add Image" to upload and add an image block'}),s.jsx("li",{children:'Use the "+" buttons that appear when hovering over existing blocks'})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Reordering Blocks:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-600",children:[s.jsx("li",{children:"Drag and drop blocks to reorder them"}),s.jsx("li",{children:"Use the up/down arrow buttons on each block"}),s.jsx("li",{children:"Hover over blocks to see the drag handle"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Managing Blocks:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-600",children:[s.jsx("li",{children:"Hover over blocks to see control buttons"}),s.jsx("li",{children:"Click the trash icon to remove a block"}),s.jsx("li",{children:"For image blocks, you can edit the alt text"})]})]})]})})]})]})})},vr=()=>{const a=S();return e.useEffect(()=>{},[a.pathname]),s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),s.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},jr=new ns,br=()=>s.jsx(ls,{client:jr,children:s.jsx(oa,{children:s.jsxs(Ga,{children:[s.jsx(Bs,{}),s.jsx(la,{}),s.jsx(os,{basename:"/admin",children:s.jsxs(ds,{children:[s.jsx(cs,{path:"/",element:s.jsx(Dt,{})}),s.jsx(cs,{path:"/articles",element:s.jsx(Ot,{})}),s.jsx(cs,{path:"/articles/create",element:s.jsx(Zt,{})}),s.jsx(cs,{path:"/articles/edit/:id",element:s.jsx(er,{})}),s.jsx(cs,{path:"/categories",element:s.jsx(cr,{})}),s.jsx(cs,{path:"/users",element:s.jsx(mr,{})}),s.jsx(cs,{path:"/settings",element:s.jsx(hr,{})}),s.jsx(cs,{path:"/breaking-news",element:s.jsx(xr,{})}),s.jsx(cs,{path:"/articles/:postId/analytics",element:s.jsx(gr,{})}),s.jsx(cs,{path:"/articles/:postId/comments",element:s.jsx(pr,{})}),s.jsx(cs,{path:"/block-editor-demo",element:s.jsx(fr,{})}),s.jsx(cs,{path:"*",element:s.jsx(vr,{})})]})})]})})});ms(document.getElementById("root")).render(s.jsx(br,{}));
